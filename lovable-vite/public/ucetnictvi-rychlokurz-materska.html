<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<title>PenÃ­zky a vÄ›ci â€“ pro Å¡kolku ğŸ§’</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#f8f6f3;--bg2:#fff;--bg3:#f0ede8;--text:#2d2a26;--text2:#6b6560;
  --primary:#6c5ce7;--primary-light:#a29bfe;--primary-bg:#ede9fe;
  --accent:#00b894;--accent-bg:#d5f5ec;
  --orange:#f39c12;--orange-bg:#fef3d5;
  --shadow:0 2px 12px rgba(0,0,0,.08);--radius:16px;--radius-sm:12px;
  --font:'Segoe UI',system-ui,-apple-system,sans-serif;
}
html{scroll-behavior:smooth;font-size:18px}
body{font-family:var(--font);background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh}
.app{max-width:800px;margin:0 auto;padding:0 20px 60px}
header{background:var(--bg2);border-bottom:4px solid var(--primary);padding:20px 0;position:sticky;top:0;z-index:100;box-shadow:var(--shadow)}
.header-inner{max-width:800px;margin:0 auto;padding:0 20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}
.logo{font-size:1.5rem;font-weight:800;color:var(--primary);display:flex;align-items:center;gap:10px}
.logo span{font-size:2rem}
.progress-wrap{width:100%;max-width:800px;margin:0 auto;padding:10px 20px}
.progress-bar{height:12px;background:var(--bg3);border-radius:99px;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--primary),var(--accent));border-radius:99px;transition:width .5s ease;width:0}
.progress-text{font-size:1rem;color:var(--text2);text-align:center;margin-top:6px;font-weight:600}
.nav{display:flex;flex-wrap:wrap;gap:10px;margin:20px 0;justify-content:center}
.nav-btn{padding:12px 18px;border:3px solid var(--bg3);background:var(--bg2);border-radius:var(--radius-sm);cursor:pointer;font-size:1rem;font-weight:700;transition:all .2s}
.nav-btn:hover:not(.locked){border-color:var(--primary);color:var(--primary);transform:scale(1.02)}
.nav-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.nav-btn.completed{border-color:var(--accent);color:var(--accent)}
.nav-btn.completed::after{content:'âœ“';margin-left:6px;font-size:1.1rem}
.nav-btn.locked{opacity:.5;cursor:not-allowed}
.lesson{background:var(--bg2);border-radius:var(--radius);padding:36px;box-shadow:var(--shadow);margin-bottom:24px}
.lesson h2{font-size:1.8rem;color:var(--primary);margin-bottom:16px;display:flex;align-items:center;gap:12px}
.lesson h2 .emoji{font-size:2.5rem}
.lesson p{font-size:1.25rem;margin-bottom:20px;line-height:1.7}
.lesson ul{margin:16px 0 24px 28px;font-size:1.2rem}
.lesson li{margin-bottom:12px}
.big-emoji{font-size:5rem;display:block;text-align:center;margin:20px 0}
.highlight{background:var(--primary-bg);border-left:6px solid var(--primary);padding:20px 24px;border-radius:0 var(--radius-sm) var(--radius-sm) 0;margin:24px 0;font-size:1.2rem;font-weight:600}
.tip{background:var(--accent-bg);padding:20px;border-radius:var(--radius-sm);margin:20px 0;font-size:1.15rem}
.btn{padding:16px 32px;border-radius:var(--radius-sm);cursor:pointer;font-size:1.2rem;font-weight:700;border:none;transition:all .2s;display:inline-flex;align-items:center;gap:8px}
.btn:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
.btn-primary{background:var(--primary);color:#fff}
.btn-accent{background:var(--accent);color:#fff}
.btn-group{display:flex;gap:16px;margin-top:28px;flex-wrap:wrap;justify-content:center}
.quiz-kids{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:24px 0}
.quiz-kids .btn{width:100%;justify-content:center;min-height:80px;font-size:1.15rem}
.lesson-footer{display:flex;justify-content:space-between;margin-top:32px;padding-top:24px;border-top:3px solid var(--bg3);flex-wrap:wrap;gap:16px}
.welcome{text-align:center;padding:40px 20px}
.welcome h1{font-size:2.2rem;color:var(--primary);margin-bottom:12px}
.welcome .subtitle{font-size:1.3rem;color:var(--text2);margin-bottom:28px}
.confetti-wrap{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;overflow:hidden}
.confetti{position:absolute;width:12px;height:12px;border-radius:3px;animation:confettiFall 2.5s ease-out forwards}
@keyframes confettiFall{0%{transform:translateY(-20px) rotate(0deg);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}
@media(max-width:600px){.quiz-kids{grid-template-columns:1fr}.lesson{padding:24px}.lesson p{font-size:1.1rem}}
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="logo"><span>ğŸ§’</span> PenÃ­zky a vÄ›ci â€“ pro Å¡kolku</div>
  </div>
  <div class="progress-wrap">
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <div class="progress-text" id="progressText">0 / 7 krokÅ¯</div>
  </div>
</header>

<div class="app">
  <nav class="nav" id="lessonNav"></nav>
  <main id="mainContent">
    <div class="welcome" id="mainContentFallback">
      <span class="big-emoji">ğŸ§’ğŸ’°</span>
      <h1>PenÃ­zky a vÄ›ci</h1>
      <p class="subtitle">Pro nejmenÅ¡Ã­ â€“ co mÃ¡me a co dÃ¡vÃ¡me</p>
      <p style="margin-top:1.5rem"><a href="ucetnictvi-rychlokurz-materska.html" class="btn btn-primary" style="display:inline-block;padding:16px 32px;text-decoration:none;border-radius:12px;background:var(--primary);color:#fff;font-weight:700">ZaÄÃ­t hrÃ¡t â†’</a></p>
    </div>
  </main>
</div>

<script>
const APP = {
  currentLesson: 0,
  completed: new Set(),
  storageKey: 'ucetnictvi_materska_progress',
  init() {
    if (typeof LESSONS === 'undefined' || !LESSONS.length) return;
    try {
      const saved = localStorage.getItem(this.storageKey);
      if (saved) {
        const d = JSON.parse(saved);
        if (d.completed) this.completed = new Set(d.completed);
        if (typeof d.currentLesson === 'number') this.currentLesson = d.currentLesson;
      }
    } catch(e) {}
    this.renderNav();
    this.showLesson(this.currentLesson);
  },
  save() {
    localStorage.setItem(this.storageKey, JSON.stringify({
      completed: [...this.completed],
      currentLesson: this.currentLesson
    }));
  },
  completeLesson(n) {
    this.completed.add(n);
    this.save();
    this.renderNav();
    this.updateProgress();
    const colors = ['#6c5ce7','#00b894','#f39c12','#e74c3c','#3498db'];
    const wrap = document.createElement('div');
    wrap.className = 'confetti-wrap';
    document.body.appendChild(wrap);
    for (let i = 0; i < 40; i++) {
      const c = document.createElement('div');
      c.className = 'confetti';
      c.style.left = Math.random() * 100 + '%';
      c.style.background = colors[Math.floor(Math.random() * colors.length)];
      c.style.animationDelay = Math.random() * 0.5 + 's';
      wrap.appendChild(c);
    }
    setTimeout(() => wrap.remove(), 3000);
  },
  isUnlocked(n) {
    if (n === 0) return true;
    return this.completed.has(n - 1) || this.completed.has(n);
  },
  renderNav() {
    const nav = document.getElementById('lessonNav');
    nav.innerHTML = LESSONS.map((l, i) => {
      const done = this.completed.has(i);
      const active = this.currentLesson === i;
      const unlocked = this.isUnlocked(i);
      let cls = 'nav-btn';
      if (active) cls += ' active';
      else if (done) cls += ' completed';
      else if (!unlocked) cls += ' locked';
      const label = (i + 1) + '. ' + l.short;
      return `<button class="${cls}" onclick="goToLesson(${i})" ${!unlocked ? 'disabled' : ''}>${label}</button>`;
    }).join('');
    this.updateProgress();
  },
  updateProgress() {
    const done = this.completed.size;
    const total = LESSONS.length;
    const pct = total ? Math.round((done / total) * 100) : 0;
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('progressText').textContent = done + ' / ' + total + ' krokÅ¯';
  },
  showLesson(n) {
    this.currentLesson = n;
    this.save();
    this.renderNav();
    const main = document.getElementById('mainContent');
    if (!main || !LESSONS[n]) return;
    main.innerHTML = LESSONS[n].render(n);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
};
function goToLesson(n) {
  if (!APP.isUnlocked(n) && !APP.completed.has(n)) return;
  APP.showLesson(n);
}
function nextLesson() {
  if (APP.currentLesson < LESSONS.length - 1) APP.showLesson(APP.currentLesson + 1);
}
function makeFooter(idx) {
  const prev = idx > 0 ? `<button class="btn btn-primary" onclick="goToLesson(${idx - 1})">â† ZpÄ›t</button>` : '<span></span>';
  const next = idx < LESSONS.length - 1 ? `<button class="btn btn-accent" onclick="nextLesson()">DalÅ¡Ã­ â†’</button>` : '';
  return `<div class="lesson-footer">${prev}${next}</div>`;
}

const LESSONS = [
  {
    short: 'Start',
    render() {
      return `<div class="welcome">
        <span class="big-emoji">ğŸ§’â¤ï¸</span>
        <h1>PenÃ­zky a vÄ›ci</h1>
        <p class="subtitle">PojÄ si s nÃ¡mi hrÃ¡t! Budeme si povÃ­dat o tom, co MÃME a co DÃVÃME.</p>
        <div class="lesson" style="text-align:left;margin-top:24px">
          <p>KaÅ¾dÃ½ mÃ¡ nÄ›co â€“ hraÄky, knÃ­Å¾ky, penÃ­zky v prasÃ¡tku. A kdyÅ¾ nÄ›co koupÃ­me nebo pÅ¯jÄÃ­me kamarÃ¡dovi, nÄ›co DÃME a nÄ›co DOSTANEME.</p>
          <p>Je to jako pohÃ¡dka o rovnovÃ¡ze: <strong>co dÃ¡m, tolik dostanu. Co mÃ¡m, tolik mÅ¯Å¾u dÃ¡t.</strong></p>
          <div class="btn-group">
            <button class="btn btn-primary" onclick="APP.completeLesson(0);nextLesson()" style="font-size:1.3rem;padding:18px 40px">Jdeme na to! â†’</button>
          </div>
        </div>
      </div>`;
    }
  },
  {
    short: 'Co mÃ¡me',
    render(idx) {
      return `<div class="lesson">
        <h2><span class="emoji">ğŸ§¸</span> Co MÃME?</h2>
        <p>MÃ¡Å¡ hraÄky? KnÃ­Å¾ky? PrasÃ¡tko s penÃ­zky? To vÅ¡echno je <strong>NAÅ E</strong>.</p>
        <span class="big-emoji">ğŸ§¸ğŸ“šğŸ·</span>
        <p>VÅ¡echno, co mÃ¡me doma nebo ve Å¡kolce â€“ autÃ­Äka, panenky, pastelky â€“ to si mÅ¯Å¾eme spoÄÃ­tat a Å™Ã­ct: <strong>â€Tohle mÃ¡me!â€œ</strong></p>
        <div class="highlight">Co vidÃ­Å¡ kolem sebe? To, co je tvoje nebo naÅ¡e, to MÃME.</div>
        ${makeFooter(idx)}
      </div>`;
    }
  },
  {
    short: 'DÃ¡me a dostaneme',
    render(idx) {
      return `<div class="lesson">
        <h2><span class="emoji">ğŸ›’</span> KdyÅ¾ nÄ›co koupÃ­me</h2>
        <p>Maminka jde do obchodu. DÃ¡ panÃ­ <strong>penÃ­zky</strong>. PanÃ­ jÃ­ dÃ¡ <strong>mlÃ©ko</strong>.</p>
        <span class="big-emoji">ğŸ’° â†’ ğŸ¥›</span>
        <p>Maminka tedy <strong>DALA</strong> penÃ­zky a <strong>DOSTALA</strong> mlÃ©ko. VÅ¾dycky je to tak: nÄ›co dÃ¡m, nÄ›co dostanu.</p>
        <div class="tip">KdyÅ¾ dÃ¡m jednu vÄ›c, dostanu jinou. Je to fÃ©r â€“ jedna za druhou!</div>
        ${makeFooter(idx)}
      </div>`;
    }
  },
  {
    short: 'DvÄ› strany',
    render(idx) {
      return `<div class="lesson">
        <h2><span class="emoji">âš–ï¸</span> DvÄ› strany</h2>
        <p>KdyÅ¾ nÄ›co <strong>DÃM</strong>, nÄ›co <strong>DOSTANU</strong>. Nebo naopak â€“ kdyÅ¾ nÄ›co dostanu, nÄ›co dÃ¡m.</p>
        <span class="big-emoji">ğŸ‘ˆ â¤ï¸ ğŸ‘‰</span>
        <p>VÅ¾dycky je to spravedlivÄ›: <strong>kolik dÃ¡m, tolik dostanu.</strong> Jako na vahÃ¡ch â€“ obÄ› strany jsou vyrovnanÃ©.</p>
        <div class="highlight">DÃM jednu vÄ›c = DOSTANU jednu vÄ›c. To je zÃ¡konitost!</div>
        ${makeFooter(idx)}
      </div>`;
    }
  },
  {
    short: 'PoÄÃ­tÃ¡nÃ­',
    render(idx) {
      return `<div class="lesson">
        <h2><span class="emoji">ğŸ”¢</span> PoÄÃ­tÃ¡me!</h2>
        <p>Kolik mÃ¡me autÃ­Äek? <strong>Jedna, dva, tÅ™i!</strong></p>
        <span class="big-emoji">1ï¸âƒ£ 2ï¸âƒ£ 3ï¸âƒ£</span>
        <p>I penÃ­zky se poÄÃ­tajÃ­. KdyÅ¾ mÃ¡m tÅ™i mince a jednu dÃ¡m, kolik mi zbude? <strong>DvÄ›!</strong> PoÄÃ­tÃ¡nÃ­ nÃ¡m Å™Ã­kÃ¡, kolik Äeho mÃ¡me.</p>
        <div class="tip">PoÄÃ­tÃ¡nÃ­ je zÃ¡bava. Zkus spoÄÃ­tat hraÄky v pokoji!</div>
        ${makeFooter(idx)}
      </div>`;
    }
  },
  {
    short: 'PÅ¯jÄovÃ¡nÃ­',
    render(idx) {
      return `<div class="lesson">
        <h2><span class="emoji">ğŸ¤</span> PÅ¯jÄÃ­m kamarÃ¡dovi</h2>
        <p>PÅ¯jÄÃ­m AniÄce autÃ­Äko. AniÄka ho teÄ <strong>MÃ</strong>. JÃ¡ ho teÄ <strong>NEMÃM</strong>.</p>
        <span class="big-emoji">ğŸš— â†’ ğŸ‘§</span>
        <p>KdyÅ¾ mi ho AniÄka <strong>VRÃTÃ</strong>, zase ho <strong>MÃM</strong>. Dala jsem ho na chvÃ­li pryÄ a pak jsem ho dostala zpÄ›t. DvÄ› strany â€“ jÃ¡ dala, AniÄka vrÃ¡tila!</p>
        <div class="highlight">PÅ¯jÄit = na chvÃ­li dÃ¡t. VrÃ¡tit = zase dostat. Je to fÃ©r.</div>
        ${makeFooter(idx)}
      </div>`;
    }
  },
  {
    short: 'HurÃ¡!',
    render(idx) {
      return `<div class="lesson">
        <h2><span class="emoji">ğŸ‰</span> UmÃ­Å¡ to!</h2>
        <p>KdyÅ¾ nÄ›co <strong>DÃM</strong>, nÄ›co <strong>MÃM</strong> nebo <strong>DOSTANU</strong>. A kdyÅ¾ nÄ›co mÃ¡m, mÅ¯Å¾u to dÃ¡t. To je celÃ© kouzlo!</p>
        <span class="big-emoji">ğŸŒŸğŸŠğŸŒŸ</span>
        <p>VÄ›tÅ¡Ã­ dÄ›ti a dospÄ›lÃ­ to zapisujÃ­ do knÃ­Å¾ek a Å™Ã­kajÃ­ tomu ÃºÄetnictvÃ­. Ty uÅ¾ vÃ­Å¡ hlavnÃ­ myÅ¡lenku: <strong>dÃ¡t a dostat â€“ dvÄ› strany â€“ spravedlivÄ›.</strong></p>
        <div class="tip">AÅ¾ budeÅ¡ velkÃ½/Ã¡, budeÅ¡ to umÄ›t jeÅ¡tÄ› pÅ™esnÄ›ji. TeÄ jsi to zvlÃ¡dl/a! ğŸ‘</div>
        <div class="btn-group">
          <button class="btn btn-accent" onclick="APP.completeLesson(${idx});nextLesson();">Znovu od zaÄÃ¡tku ğŸ”„</button>
          <button class="btn btn-primary" onclick="goToLesson(0)">ZpÄ›t na Ãºvod</button>
        </div>
      </div>`;
    }
  }
];

document.addEventListener('DOMContentLoaded', () => { APP.init(); });
</script>
</body>
</html>
