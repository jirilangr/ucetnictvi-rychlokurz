<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rychlokurz podvojnÃ©ho ÃºÄetnictvÃ­</title>
<style>
/* ===================== RESET & BASE ===================== */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#f8f6f3;--bg2:#fff;--bg3:#f0ede8;--text:#2d2a26;--text2:#6b6560;
  --primary:#6c5ce7;--primary-light:#a29bfe;--primary-bg:#ede9fe;
  --accent:#00b894;--accent-bg:#d5f5ec;
  --red:#e74c3c;--red-bg:#fde8e8;--red-light:#f5a5a5;
  --blue:#3498db;--blue-bg:#e0f0ff;--blue-light:#85c1e9;
  --green:#27ae60;--green-bg:#e0f8ec;--green-light:#82e0aa;
  --orange:#f39c12;--orange-bg:#fef3d5;
  --purple:#8e44ad;--purple-bg:#f0e0f8;
  --shadow:0 2px 12px rgba(0,0,0,.08);--shadow-lg:0 8px 32px rgba(0,0,0,.12);
  --radius:12px;--radius-sm:8px;--radius-xs:6px;
  --font:'Segoe UI',system-ui,-apple-system,sans-serif;
  --transition:all .3s ease;
}
[data-theme="dark"]{
  --bg:#1a1a2e;--bg2:#16213e;--bg3:#0f3460;--text:#e8e8e8;--text2:#a0a0b0;
  --primary:#a29bfe;--primary-light:#6c5ce7;--primary-bg:#2d2560;
  --accent:#55efc4;--accent-bg:#1a4a3a;
  --red:#ff6b6b;--red-bg:#4a2020;--red-light:#c0392b;
  --blue:#74b9ff;--blue-bg:#1a3a5c;--blue-light:#2980b9;
  --green:#55efc4;--green-bg:#1a4a3a;--green-light:#1abc9c;
  --orange:#ffeaa7;--orange-bg:#4a3a1a;
  --purple:#dda0dd;--purple-bg:#3a1a4a;
  --shadow:0 2px 12px rgba(0,0,0,.3);--shadow-lg:0 8px 32px rgba(0,0,0,.4);
}
html{scroll-behavior:smooth;font-size:16px}
body{font-family:var(--font);background:var(--bg);color:var(--text);line-height:1.7;min-height:100vh;transition:var(--transition)}

/* ===================== LAYOUT ===================== */
.app{max-width:900px;margin:0 auto;padding:0 20px 60px}
header{background:var(--bg2);border-bottom:2px solid var(--primary);padding:16px 0;position:sticky;top:0;z-index:100;box-shadow:var(--shadow)}
.header-inner{max-width:900px;margin:0 auto;padding:0 20px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.logo{font-size:1.4rem;font-weight:800;color:var(--primary);display:flex;align-items:center;gap:8px}
.logo span{font-size:1.6rem}
.header-controls{display:flex;align-items:center;gap:10px}

/* Progress bar */
.progress-wrap{width:100%;max-width:900px;margin:0 auto;padding:8px 20px}
.progress-bar{height:8px;background:var(--bg3);border-radius:99px;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--primary),var(--accent));border-radius:99px;transition:width .5s ease;width:0}
.progress-text{font-size:.8rem;color:var(--text2);text-align:center;margin-top:4px}

/* Theme toggle */
.theme-btn{background:var(--bg3);border:none;cursor:pointer;font-size:1.3rem;padding:6px 10px;border-radius:var(--radius-xs);transition:var(--transition)}
.theme-btn:hover{background:var(--primary-bg)}

/* Print button */
.print-btn{background:var(--primary);color:#fff;border:none;cursor:pointer;font-size:.85rem;padding:8px 14px;border-radius:var(--radius-xs);font-weight:600;transition:var(--transition)}
.print-btn:hover{opacity:.85;transform:translateY(-1px)}

/* ===================== NAVIGATION ===================== */
.nav{display:flex;flex-wrap:wrap;gap:6px;margin:24px 0 16px;justify-content:center}
.nav-btn{padding:8px 14px;border:2px solid var(--bg3);background:var(--bg2);border-radius:var(--radius-sm);cursor:pointer;font-size:.82rem;font-weight:600;color:var(--text2);transition:var(--transition);position:relative;white-space:nowrap}
.nav-btn:hover:not(.locked){border-color:var(--primary);color:var(--primary)}
.nav-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.nav-btn.completed{border-color:var(--accent);color:var(--accent)}
.nav-btn.completed::after{content:'âœ“';position:absolute;top:-6px;right:-6px;background:var(--accent);color:#fff;width:18px;height:18px;border-radius:50%;font-size:.65rem;display:flex;align-items:center;justify-content:center}
.nav-btn.locked{opacity:.45;cursor:not-allowed}
.nav-btn.bonus{border-color:var(--orange);color:var(--orange)}
.nav-btn.bonus:hover:not(.locked){border-color:var(--orange);background:var(--orange-bg)}
.nav-btn.bonus.active{background:var(--orange);color:#fff;border-color:var(--orange)}
.nav-btn.bonus.completed{border-color:var(--accent);color:var(--accent)}
.bonus-badge{display:inline-block;background:var(--orange);color:#fff;font-size:.7rem;padding:2px 6px;border-radius:99px;margin-left:4px;vertical-align:middle}

/* ===================== LESSON CONTENT ===================== */
.lesson{background:var(--bg2);border-radius:var(--radius);padding:32px;box-shadow:var(--shadow);margin-bottom:24px;animation:fadeIn .4s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.lesson h2{font-size:1.6rem;color:var(--primary);margin-bottom:8px;display:flex;align-items:center;gap:10px}
.lesson h2 .emoji{font-size:1.8rem}
.lesson h3{font-size:1.2rem;color:var(--text);margin:20px 0 10px;border-bottom:2px solid var(--primary-bg);padding-bottom:6px}
.lesson p{margin-bottom:14px;color:var(--text)}
.lesson ul,.lesson ol{margin:10px 0 16px 20px}
.lesson li{margin-bottom:6px}
.highlight{background:var(--primary-bg);border-left:4px solid var(--primary);padding:14px 18px;border-radius:0 var(--radius-sm) var(--radius-sm) 0;margin:16px 0;font-weight:500}
.tip{background:var(--accent-bg);border-left:4px solid var(--accent);padding:14px 18px;border-radius:0 var(--radius-sm) var(--radius-sm) 0;margin:16px 0}
.warning{background:var(--orange-bg);border-left:4px solid var(--orange);padding:14px 18px;border-radius:0 var(--radius-sm) var(--radius-sm) 0;margin:16px 0}

/* Analogy box */
.analogy{background:linear-gradient(135deg,var(--primary-bg),var(--accent-bg));padding:20px;border-radius:var(--radius);margin:16px 0;border:2px dashed var(--primary-light)}
.analogy-title{font-weight:700;color:var(--primary);margin-bottom:6px;font-size:1rem}

/* ===================== T-ACCOUNT ===================== */
.t-account{border:2px solid var(--text);border-radius:var(--radius-xs);margin:16px auto;max-width:400px;overflow:hidden;background:var(--bg2)}
.t-account-title{text-align:center;font-weight:700;padding:8px;background:var(--primary-bg);color:var(--primary);border-bottom:2px solid var(--text);font-size:.95rem}
.t-account-body{display:grid;grid-template-columns:1fr 1fr;min-height:80px}
.t-account-md{border-right:2px solid var(--text);padding:10px;font-size:.9rem}
.t-account-d{padding:10px;font-size:.9rem}
.t-account-md-header,.t-account-d-header{text-align:center;font-weight:700;font-size:.85rem;color:var(--text2);padding-bottom:6px;border-bottom:1px dashed var(--text2);margin-bottom:8px}
.t-entry{padding:3px 0;display:flex;justify-content:space-between;gap:4px}
.t-entry .label{font-size:.82rem}
.t-entry .amount{font-weight:600;font-size:.85rem}

/* ===================== EQUATION ===================== */
.equation{display:flex;align-items:center;justify-content:center;gap:12px;margin:20px 0;flex-wrap:wrap;font-size:1.3rem;font-weight:800}
.eq-box{padding:12px 24px;border-radius:var(--radius-sm);text-align:center;min-width:120px}
.eq-aktiva{background:var(--blue-bg);color:var(--blue);border:2px solid var(--blue)}
.eq-pasiva{background:var(--green-bg);color:var(--green);border:2px solid var(--green)}
.eq-naklady{background:var(--red-bg);color:var(--red);border:2px solid var(--red)}
.eq-vynosy{background:var(--purple-bg);color:var(--purple);border:2px solid var(--purple)}
.eq-sign{font-size:1.5rem;color:var(--text2)}

/* ===================== ACCOUNT TABLE ===================== */
.acc-table{width:100%;border-collapse:collapse;margin:16px 0;font-size:.88rem}
.acc-table th{background:var(--primary-bg);color:var(--primary);padding:10px 12px;text-align:left;font-weight:700}
.acc-table td{padding:8px 12px;border-bottom:1px solid var(--bg3)}
.acc-table tr:hover td{background:var(--bg3)}
.acc-table .num{font-weight:700;color:var(--primary);font-family:monospace;font-size:1rem}

/* ===================== ACCOUNT CLASS CARDS ===================== */
.class-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin:16px 0}
.class-card{padding:14px;border-radius:var(--radius-sm);border:2px solid;text-align:center;transition:var(--transition);cursor:default}
.class-card:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
.class-card .num{font-size:1.4rem;font-weight:800;display:block}
.class-card .name{font-size:.85rem;font-weight:600}

/* ===================== EXERCISES ===================== */
.exercise{background:var(--bg3);border-radius:var(--radius);padding:24px;margin:24px 0}
.exercise-title{font-size:1.1rem;font-weight:700;color:var(--primary);margin-bottom:12px;display:flex;align-items:center;gap:8px}

/* Quiz */
.quiz-q{background:var(--bg2);border-radius:var(--radius-sm);padding:18px;margin:12px 0}
.quiz-q p{font-weight:600;margin-bottom:10px}
.quiz-options{display:flex;flex-direction:column;gap:8px}
.quiz-opt{padding:10px 16px;border:2px solid var(--bg3);border-radius:var(--radius-xs);cursor:pointer;transition:var(--transition);font-size:.92rem;background:var(--bg2)}
.quiz-opt:hover{border-color:var(--primary);background:var(--primary-bg)}
.quiz-opt.selected{border-color:var(--primary);background:var(--primary-bg);font-weight:600}
.quiz-opt.correct{border-color:var(--green);background:var(--green-bg);font-weight:600}
.quiz-opt.wrong{border-color:var(--red);background:var(--red-bg)}
.quiz-explanation{margin-top:8px;font-size:.88rem;color:var(--text2);padding:8px 12px;border-radius:var(--radius-xs);display:none}
.quiz-explanation.show{display:block;background:var(--accent-bg)}

/* Drag and drop */
.dnd-zone{min-height:100px;border:2px dashed var(--text2);border-radius:var(--radius-sm);padding:12px;display:flex;flex-wrap:wrap;gap:8px;align-content:flex-start;transition:var(--transition)}
.dnd-zone.over{border-color:var(--primary);background:var(--primary-bg)}
.dnd-item{padding:8px 16px;border-radius:var(--radius-xs);cursor:grab;font-size:.9rem;font-weight:600;transition:var(--transition);user-select:none;border:2px solid transparent}
.dnd-item:active{cursor:grabbing;opacity:.7}
.dnd-item.correct-place{border-color:var(--green);box-shadow:0 0 8px rgba(39,174,96,.3)}
.dnd-item.wrong-place{border-color:var(--red);box-shadow:0 0 8px rgba(231,76,60,.3);animation:shake .4s}
@keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-5px)}40%,80%{transform:translateX(5px)}}
.dnd-source{background:var(--bg2);border:2px dashed var(--primary-light);border-radius:var(--radius-sm);padding:12px;display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px;min-height:60px}
.dnd-targets{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.dnd-target-label{font-weight:700;text-align:center;margin-bottom:6px;font-size:.95rem}

/* Matching */
.match-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:12px 0}
.match-item{padding:10px;border-radius:var(--radius-xs);cursor:pointer;text-align:center;font-weight:600;transition:var(--transition);border:2px solid var(--bg3);font-size:.88rem}
.match-item:hover{border-color:var(--primary)}
.match-item.selected{border-color:var(--primary);background:var(--primary-bg);box-shadow:0 0 8px rgba(108,92,231,.2)}
.match-item.matched{border-color:var(--green);background:var(--green-bg);cursor:default;opacity:.7}
.match-item.wrong-match{border-color:var(--red);background:var(--red-bg);animation:shake .4s}

/* Buttons */
.btn{padding:10px 24px;border-radius:var(--radius-xs);cursor:pointer;font-size:.95rem;font-weight:600;border:none;transition:var(--transition);display:inline-flex;align-items:center;gap:6px}
.btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
.btn-primary{background:var(--primary);color:#fff}
.btn-accent{background:var(--accent);color:#fff}
.btn-outline{background:transparent;color:var(--primary);border:2px solid var(--primary)}
.btn:disabled{opacity:.4;cursor:not-allowed;transform:none}
.btn-group{display:flex;gap:10px;margin-top:20px;flex-wrap:wrap;justify-content:center}

/* Score */
.score-box{text-align:center;padding:24px;background:linear-gradient(135deg,var(--primary-bg),var(--accent-bg));border-radius:var(--radius);margin:16px 0}
.score-big{font-size:3rem;font-weight:800;color:var(--primary)}
.score-label{font-size:1rem;color:var(--text2)}
.score-msg{font-size:1.1rem;margin-top:8px;font-weight:600}

/* Feedback inline */
.feedback{padding:10px 16px;border-radius:var(--radius-xs);margin-top:10px;font-weight:600;font-size:.9rem;display:none}
.feedback.show{display:block}
.feedback.success{background:var(--green-bg);color:var(--green)}
.feedback.error{background:var(--red-bg);color:var(--red)}

/* Stars */
.stars{font-size:1.5rem;letter-spacing:4px;margin:8px 0}
.star-filled{color:var(--orange)}
.star-empty{color:var(--bg3)}

/* ===================== CHEATSHEET (Print) ===================== */
.cheatsheet{display:none}

/* ===================== WELCOME ===================== */
.welcome{text-align:center;padding:40px 20px}
.welcome h1{font-size:2rem;color:var(--primary);margin-bottom:8px}
.welcome .subtitle{font-size:1.1rem;color:var(--text2);margin-bottom:24px}
.welcome .big-emoji{font-size:4rem;margin-bottom:16px;display:block}

/* ===================== FOOTER NAV ===================== */
.lesson-footer{display:flex;justify-content:space-between;margin-top:28px;padding-top:20px;border-top:2px solid var(--bg3);flex-wrap:wrap;gap:10px}

/* ===================== RESPONSIVE ===================== */
@media(max-width:600px){
  .lesson{padding:18px}
  .equation{font-size:1rem}
  .eq-box{padding:8px 14px;min-width:90px;font-size:.9rem}
  .dnd-targets{grid-template-columns:1fr}
  .header-inner{justify-content:center}
  .nav-btn{font-size:.75rem;padding:6px 10px}
  .t-account{max-width:100%}
  .class-grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}
  .match-grid{grid-template-columns:1fr}
}

/* ===================== ANIMATIONS ===================== */
.pop{animation:pop .3s ease}
@keyframes pop{0%{transform:scale(.9)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
.glow{animation:glow 1s ease infinite alternate}
@keyframes glow{from{box-shadow:0 0 5px var(--primary)}to{box-shadow:0 0 20px var(--primary)}}
.bounce{animation:bounce .6s ease}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
.confetti-wrap{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;overflow:hidden}
.confetti{position:absolute;width:10px;height:10px;border-radius:2px;animation:confettiFall 2.5s ease-out forwards}
@keyframes confettiFall{0%{transform:translateY(-20px) rotate(0deg);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}

/* ===================== INTERACTIVE T-ACCOUNT EXERCISE ===================== */
.t-click-area{cursor:pointer;transition:var(--transition);min-height:40px;display:flex;align-items:center;justify-content:center;font-weight:600;border-radius:var(--radius-xs)}
.t-click-area:hover{background:var(--primary-bg)}
.t-click-area.flash-green{background:var(--green-bg);color:var(--green)}
.t-click-area.flash-red{background:var(--red-bg);color:var(--red)}

/* ===================== DOCUMENT EXERCISE ===================== */
.doc-card{background:var(--bg2);border:2px solid var(--bg3);border-radius:var(--radius-sm);padding:18px;margin:12px 0;font-size:.9rem;position:relative}
.doc-card .doc-type{position:absolute;top:-10px;left:14px;background:var(--primary);color:#fff;padding:2px 10px;border-radius:99px;font-size:.75rem;font-weight:700}
.doc-card .doc-line{padding:4px 0;display:flex;justify-content:space-between;cursor:pointer;border-radius:var(--radius-xs);padding:4px 6px;transition:var(--transition)}
.doc-card .doc-line:hover{background:var(--bg3)}
.doc-card .doc-line.found{background:var(--green-bg);color:var(--green);cursor:default}

/* ===================== DPH CALC ===================== */
.dph-calc{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:16px 0}
.dph-calc label{display:block;font-weight:600;margin-bottom:4px;font-size:.9rem}
.dph-calc input,.dph-calc select{width:100%;padding:10px;border:2px solid var(--bg3);border-radius:var(--radius-xs);font-size:1rem;background:var(--bg2);color:var(--text);font-family:var(--font)}
.dph-calc input:focus,.dph-calc select:focus{outline:none;border-color:var(--primary)}
.dph-result{background:var(--primary-bg);padding:16px;border-radius:var(--radius-sm);text-align:center;font-size:1.1rem;margin-top:12px}

/* ===================== FINAL TEST ===================== */
.test-question{background:var(--bg2);border-radius:var(--radius-sm);padding:18px;margin:14px 0;border-left:4px solid var(--primary)}
.test-question .q-num{font-size:.8rem;color:var(--text2);font-weight:700;margin-bottom:4px}
.test-question p{font-weight:600;margin-bottom:10px}
.test-summary{background:linear-gradient(135deg,var(--primary-bg),var(--accent-bg));border-radius:var(--radius);padding:30px;text-align:center;margin:20px 0}
.test-summary .big-score{font-size:4rem;font-weight:800}
.test-summary .grade{font-size:1.3rem;font-weight:700;margin:8px 0}
.test-result-item{display:flex;align-items:flex-start;gap:10px;padding:10px;margin:6px 0;border-radius:var(--radius-xs);font-size:.9rem}
.test-result-item.ok{background:var(--green-bg)}
.test-result-item.nok{background:var(--red-bg)}

/* ===================== PRINT ===================== */
@media print{
  body{background:#fff;color:#000;font-size:11pt}
  header,.nav,.exercise,.btn-group,.lesson-footer,.header-controls,.progress-wrap,.theme-btn,.print-btn,.no-print{display:none!important}
  .lesson{box-shadow:none;border:1px solid #ccc;break-inside:avoid;padding:16px}
  .cheatsheet{display:block!important;break-before:page}
  .cheatsheet h2{font-size:16pt;margin-bottom:12px}
  .cheatsheet table{width:100%;border-collapse:collapse;font-size:9pt}
  .cheatsheet th,.cheatsheet td{border:1px solid #999;padding:4px 8px}
  .cheatsheet th{background:#eee}
  .t-account{border:1px solid #000;max-width:300px}
  .t-account-body{border-top:1px solid #000}
  .t-account-md{border-right:1px solid #000}
}
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="logo"><span>ğŸ¨</span> ÃšÄetnictvÃ­ Rychlokurz</div>
    <div class="header-controls">
      <button class="print-btn no-print" onclick="window.print()" title="Vytiskni tahÃ¡k">ğŸ–¨ï¸ TahÃ¡k</button>
      <button class="theme-btn no-print" onclick="toggleTheme()" title="TmavÃ½ / svÄ›tlÃ½ reÅ¾im">ğŸŒ™</button>
    </div>
  </div>
  <div class="progress-wrap">
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <div class="progress-text" id="progressText">0 / 22 lekcÃ­</div>
  </div>
</header>

<div class="app">
  <nav class="nav no-print" id="lessonNav"></nav>
  <main id="mainContent"></main>
</div>

<!-- TahÃ¡k k tisku -->
<div class="cheatsheet">
  <h2>TAHÃK â€“ PodvojnÃ© ÃºÄetnictvÃ­ (shrnutÃ­)</h2>

  <h3>BilanÄnÃ­ rovnice</h3>
  <p><strong>AKTIVA = PASIVA</strong> (vÅ¾dy se musÃ­ rovnat!)</p>
  <p>AKTIVA = co firma MÃ (majetek) &nbsp;|&nbsp; PASIVA = ODKUD to mÃ¡ (zdroje)</p>

  <h3>T-ÃºÄet â€“ pravidla stran</h3>
  <table>
    <tr><th>Typ ÃºÄtu</th><th>MD (levÃ¡) = pÅ™Ã­rÅ¯stek</th><th>D (pravÃ¡) = pÅ™Ã­rÅ¯stek</th></tr>
    <tr><td>AktivnÃ­ (majetek)</td><td><strong>ANO â€“ pÅ™Ã­rÅ¯stek</strong></td><td>Ãºbytek</td></tr>
    <tr><td>PasivnÃ­ (zdroje)</td><td>Ãºbytek</td><td><strong>ANO â€“ pÅ™Ã­rÅ¯stek</strong></td></tr>
    <tr><td>NÃ¡kladovÃ½ (5xx)</td><td><strong>ANO â€“ pÅ™Ã­rÅ¯stek</strong></td><td>snÃ­Å¾enÃ­ / oprava</td></tr>
    <tr><td>VÃ½nosovÃ½ (6xx)</td><td>snÃ­Å¾enÃ­ / oprava</td><td><strong>ANO â€“ pÅ™Ã­rÅ¯stek</strong></td></tr>
  </table>

  <h3>NejdÅ¯leÅ¾itÄ›jÅ¡Ã­ ÃºÄty</h3>
  <table>
    <tr><th>ÄŒÃ­slo</th><th>NÃ¡zev</th><th>Typ</th></tr>
    <tr><td>211</td><td>Pokladna</td><td>AktivnÃ­</td></tr>
    <tr><td>221</td><td>PenÄ›Å¾nÃ­ prostÅ™edky na ÃºÄtech (Banka)</td><td>AktivnÃ­</td></tr>
    <tr><td>261</td><td>PenÃ­ze na cestÄ› (pÅ™echodnÃ½ â€“ vÃ½bÄ›r/odvod bankaâ†”pokladna)</td><td>AktivnÃ­</td></tr>
    <tr><td>111</td><td>PoÅ™Ã­zenÃ­ materiÃ¡lu (pÅ™echodnÃ½)</td><td>AktivnÃ­</td></tr>
    <tr><td>112</td><td>MateriÃ¡l na skladÄ›</td><td>AktivnÃ­</td></tr>
    <tr><td>213</td><td>Ceniny (znÃ¡mky, stravenky, kolky)</td><td>AktivnÃ­</td></tr>
    <tr><td>335</td><td>PohledÃ¡vky za zamÄ›stnanci (zÃ¡lohy, pÅ™edpisy)</td><td>AktivnÃ­</td></tr>
    <tr><td>569</td><td>Manka a Å¡kody (schodky)</td><td>NÃ¡kladovÃ½</td></tr>
    <tr><td>668</td><td>OstatnÃ­ operativnÃ­ nÃ¡klady (pÅ™edpis schodku)</td><td>NÃ¡kladovÃ½</td></tr>
    <tr><td>132</td><td>ZboÅ¾Ã­ na skladÄ›</td><td>AktivnÃ­</td></tr>
    <tr><td>022</td><td>HmotnÃ© movitÃ© vÄ›ci (vybavenÃ­)</td><td>AktivnÃ­</td></tr>
    <tr><td>311</td><td>OdbÄ›ratelÃ© (pohledÃ¡vky)</td><td>AktivnÃ­</td></tr>
    <tr><td>321</td><td>DodavatelÃ© (zÃ¡vazky)</td><td>PasivnÃ­</td></tr>
    <tr><td>331</td><td>ZamÄ›stnanci</td><td>PasivnÃ­</td></tr>
    <tr><td>343</td><td>DPH</td><td>AktivnÃ­/PasivnÃ­</td></tr>
    <tr><td>411</td><td>ZÃ¡kladnÃ­ kapitÃ¡l</td><td>PasivnÃ­</td></tr>
    <tr><td>461</td><td>BankovnÃ­ ÃºvÄ›ry</td><td>PasivnÃ­</td></tr>
    <tr><td>501</td><td>SpotÅ™eba materiÃ¡lu</td><td>NÃ¡kladovÃ½</td></tr>
    <tr><td>502</td><td>SpotÅ™eba energie</td><td>NÃ¡kladovÃ½</td></tr>
    <tr><td>518</td><td>OstatnÃ­ sluÅ¾by</td><td>NÃ¡kladovÃ½</td></tr>
    <tr><td>521</td><td>MzdovÃ© nÃ¡klady</td><td>NÃ¡kladovÃ½</td></tr>
    <tr><td>524</td><td>ZÃ¡konnÃ© sociÃ¡lnÃ­ pojiÅ¡tÄ›nÃ­</td><td>NÃ¡kladovÃ½</td></tr>
    <tr><td>551</td><td>Odpisy</td><td>NÃ¡kladovÃ½</td></tr>
    <tr><td>602</td><td>TrÅ¾by za sluÅ¾by</td><td>VÃ½nosovÃ½</td></tr>
    <tr><td>604</td><td>TrÅ¾by za zboÅ¾Ã­</td><td>VÃ½nosovÃ½</td></tr>
  </table>

  <h3>TypickÃ© ÃºÄetnÃ­ pÅ™Ã­pady hotelu</h3>
  <table>
    <tr><th>Operace</th><th>MD</th><th>D</th></tr>
    <tr><td>Host platÃ­ hotovÄ› za ubytovÃ¡nÃ­</td><td>211</td><td>602</td></tr>
    <tr><td>TrÅ¾ba kartou za ubytovÃ¡nÃ­</td><td>221</td><td>602</td></tr>
    <tr><td>NÃ¡kup potravin za hotovÃ©</td><td>501</td><td>211</td></tr>
    <tr><td>PÅ™ijatÃ¡ faktura za energie</td><td>502</td><td>321</td></tr>
    <tr><td>Ãšhrada faktury z banky</td><td>321</td><td>221</td></tr>
    <tr><td>PÅ™edpis mezd zamÄ›stnancÅ¯m</td><td>521</td><td>331</td></tr>
    <tr><td>VÃ½plata mezd z banky</td><td>331</td><td>221</td></tr>
    <tr><td>NÃ¡kup zboÅ¾Ã­ do minibaru na FP</td><td>132</td><td>321</td></tr>
    <tr><td>VÃ½bÄ›r z banky do pokladny (1. PPD)</td><td>261</td><td>221</td></tr>
    <tr><td>VÃ½bÄ›r z banky do pokladny (2. VBU)</td><td>211</td><td>261</td></tr>
    <tr><td>Odvod z pokladny na ÃºÄet (1. VPD)</td><td>261</td><td>211</td></tr>
    <tr><td>Odvod z pokladny na ÃºÄet (2. VBU)</td><td>221</td><td>261</td></tr>
    <tr><td>Schodek na pokladnÄ›</td><td>569</td><td>211</td></tr>
    <tr><td>PÅ™edpis schodku k ÃºhradÄ›</td><td>668</td><td>335</td></tr>
    <tr><td>Ãšhrada schodku hotovostÃ­ / srÃ¡Å¾kou</td><td>211 nebo 331</td><td>335</td></tr>
    <tr><td>ZÃ¡loha zamÄ›stnanci (VPD)</td><td>335</td><td>211</td></tr>
    <tr><td>VyÃºÄtovÃ¡nÃ­ zÃ¡lohy (nÃ¡klad)</td><td>512 nebo 504</td><td>335</td></tr>
    <tr><td>PÅ™ijetÃ­ bankovnÃ­ho ÃºvÄ›ru</td><td>221</td><td>461</td></tr>
  </table>

  <h3>DPH</h3>
  <p>ZÃ¡kladnÃ­ sazba: 21% &nbsp;|&nbsp; SnÃ­Å¾enÃ¡ sazba: 12% (ubytovÃ¡nÃ­, stravovÃ¡nÃ­)</p>
  <p>DPH na vstupu (nÃ¡kup): 343 MD &nbsp;|&nbsp; DPH na vÃ½stupu (prodej): 343 D</p>
</div>

<script>
// ===================== APP STATE =====================
const APP = {
  currentLesson: 0,
  completed: new Set(),
  testAnswers: {},
  init() {
    const saved = localStorage.getItem('ucetnictvi_progress');
    if (saved) {
      try {
        const d = JSON.parse(saved);
        if (d.completed) this.completed = new Set(d.completed);
        if (typeof d.currentLesson === 'number') this.currentLesson = d.currentLesson;
      } catch(e) {}
    }
    // TÃ©ma
    const theme = localStorage.getItem('ucetnictvi_theme') || 'light';
    if (theme === 'dark') document.documentElement.setAttribute('data-theme','dark');
    this.renderNav();
    this.showLesson(this.currentLesson);
  },
  save() {
    localStorage.setItem('ucetnictvi_progress', JSON.stringify({
      completed: [...this.completed],
      currentLesson: this.currentLesson
    }));
  },
  completeLesson(n) {
    this.completed.add(n);
    this.save();
    this.renderNav();
    this.updateProgress();
    showConfetti();
  },
  isUnlocked(n) {
    if (n === 0) return true;
    if (n >= 15) return this.completed.has(14);
    return this.completed.has(n - 1) || this.completed.has(n);
  },
  renderNav() {
    const nav = document.getElementById('lessonNav');
    nav.innerHTML = LESSONS.map((l, i) => {
      const done = this.completed.has(i);
      const active = this.currentLesson === i;
      const unlocked = this.isUnlocked(i);
      const isBonus = i >= 15;
      let cls = 'nav-btn' + (isBonus ? ' bonus' : '');
      if (active) cls += ' active';
      else if (done) cls += ' completed';
      else if (!unlocked) cls += ' locked';
      const label = i === 0 ? 'ğŸ ' : isBonus ? `B${i - 14}` : (i + '.');
      const short = l.short + (isBonus ? ' <span class="bonus-badge">bonus</span>' : '');
      return `<button class="${cls}" onclick="goToLesson(${i})" ${!unlocked && !done ? 'disabled' : ''}>${label} ${short}</button>`;
    }).join('');
    this.updateProgress();
  },
  updateProgress() {
    const done = this.completed.size;
    const total = Math.max(0, LESSONS.length - 1); // bez Ãºvodu
    const pct = Math.round((done / total) * 100);
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('progressText').textContent = `${done} / ${total} lekcÃ­ dokonÄeno`;
  },
  showLesson(n) {
    this.currentLesson = n;
    this.save();
    this.renderNav();
    const main = document.getElementById('mainContent');
    main.innerHTML = LESSONS[n].render(n);
    if (LESSONS[n].afterRender) LESSONS[n].afterRender(n);
    window.scrollTo({top: 0, behavior: 'smooth'});
  }
};

function goToLesson(n) {
  if (!APP.isUnlocked(n) && !APP.completed.has(n)) return;
  APP.showLesson(n);
}
function toggleTheme() {
  const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
  document.documentElement.setAttribute('data-theme', isDark ? '' : 'dark');
  localStorage.setItem('ucetnictvi_theme', isDark ? 'light' : 'dark');
}
function nextLesson() {
  if (APP.currentLesson < LESSONS.length - 1) {
    APP.showLesson(APP.currentLesson + 1);
  }
}

// ===================== CONFETTI =====================
function showConfetti() {
  const wrap = document.createElement('div');
  wrap.className = 'confetti-wrap';
  document.body.appendChild(wrap);
  const colors = ['#6c5ce7','#00b894','#e74c3c','#f39c12','#3498db','#e84393','#fdcb6e'];
  for (let i = 0; i < 50; i++) {
    const c = document.createElement('div');
    c.className = 'confetti';
    c.style.left = Math.random() * 100 + '%';
    c.style.background = colors[Math.floor(Math.random() * colors.length)];
    c.style.animationDelay = Math.random() * 1 + 's';
    c.style.width = (6 + Math.random() * 8) + 'px';
    c.style.height = (6 + Math.random() * 8) + 'px';
    wrap.appendChild(c);
  }
  setTimeout(() => wrap.remove(), 3000);
}

// ===================== HELPER FUNCTIONS =====================
function makeQuiz(questions, quizId, lessonIdx) {
  let html = '';
  questions.forEach((q, qi) => {
    html += `<div class="quiz-q" id="${quizId}_q${qi}">
      <p>${qi + 1}. ${q.q}</p>
      <div class="quiz-options">
        ${q.opts.map((o, oi) => `<div class="quiz-opt" data-qi="${qi}" data-oi="${oi}" onclick="checkQuizAnswer('${quizId}',${qi},${oi},${q.correct},${lessonIdx})">${o}</div>`).join('')}
      </div>
      <div class="quiz-explanation" id="${quizId}_exp${qi}">${q.explanation || ''}</div>
    </div>`;
  });
  html += `<div class="score-box" id="${quizId}_score" style="display:none">
    <div class="stars" id="${quizId}_stars"></div>
    <div class="score-big" id="${quizId}_scoreNum"></div>
    <div class="score-label">sprÃ¡vnÃ½ch odpovÄ›dÃ­</div>
    <div class="score-msg" id="${quizId}_msg"></div>
    <div class="btn-group" style="margin-top:16px">
      <button class="btn btn-primary" onclick="nextLesson()">PokraÄovat â†’</button>
    </div>
  </div>`;
  return html;
}

const quizState = {};
function checkQuizAnswer(quizId, qi, oi, correct, lessonIdx) {
  if (!quizState[quizId]) quizState[quizId] = {};
  if (quizState[quizId][qi] !== undefined) return; // uÅ¾ zodpovÄ›zeno
  quizState[quizId][qi] = oi;

  const qEl = document.getElementById(`${quizId}_q${qi}`);
  const opts = qEl.querySelectorAll('.quiz-opt');
  opts.forEach((o, i) => {
    if (i === correct) o.classList.add('correct');
    else if (i === oi && oi !== correct) o.classList.add('wrong');
  });
  const exp = document.getElementById(`${quizId}_exp${qi}`);
  if (exp.textContent) exp.classList.add('show');

  // Zkontroluj, jestli jsou zodpovÄ›zeny vÅ¡echny
  const totalQ = document.querySelectorAll(`[id^="${quizId}_q"]`).length;
  const answered = Object.keys(quizState[quizId]).length;
  if (answered >= totalQ) {
    setTimeout(() => showQuizScore(quizId, lessonIdx), 500);
  }
}

function showQuizScore(quizId, lessonIdx) {
  const answers = quizState[quizId];
  const qEls = document.querySelectorAll(`[id^="${quizId}_q"]`);
  let correctCount = 0;
  qEls.forEach((el, qi) => {
    const opts = el.querySelectorAll('.quiz-opt');
    const correctIdx = [...opts].findIndex(o => o.classList.contains('correct'));
    if (answers[qi] === correctIdx) correctCount++;
  });
  const total = qEls.length;
  const pct = Math.round((correctCount / total) * 100);

  const scoreBox = document.getElementById(`${quizId}_score`);
  scoreBox.style.display = 'block';
  document.getElementById(`${quizId}_scoreNum`).textContent = `${correctCount} / ${total}`;

  const starsCount = pct >= 90 ? 3 : pct >= 60 ? 2 : pct >= 30 ? 1 : 0;
  document.getElementById(`${quizId}_stars`).innerHTML =
    '<span class="star-filled">â˜…</span>'.repeat(starsCount) +
    '<span class="star-empty">â˜…</span>'.repeat(3 - starsCount);

  const msgs = pct >= 90 ? 'VÃ½bornÄ›! Tohle mÃ¡Å¡ v malÃ­Äku! ğŸ‰' :
    pct >= 60 ? 'DobrÃ¡ prÃ¡ce! JeÅ¡tÄ› trochu procviÄit a bude to! ğŸ’ª' :
    pct >= 30 ? 'NevadÃ­, zkus si lekci proÄÃ­st znovu. PÅ¯jde to! ğŸ“–' :
    'ZaÄni lekci od zaÄÃ¡tku a neboj se â€“ kaÅ¾dÃ½ mistr byl uÄednÃ­kem! ğŸŒ±';
  document.getElementById(`${quizId}_msg`).textContent = msgs;

  if (pct >= 50) {
    APP.completeLesson(lessonIdx);
  }
  scoreBox.scrollIntoView({behavior: 'smooth', block: 'center'});
}

function makeFooter(lessonIdx) {
  const prev = lessonIdx > 0 ? `<button class="btn btn-outline" onclick="goToLesson(${lessonIdx - 1})">â† ZpÄ›t</button>` : '<span></span>';
  const next = lessonIdx < LESSONS.length - 1 ? `<button class="btn btn-primary" onclick="nextLesson()">DalÅ¡Ã­ lekce â†’</button>` : '';
  return `<div class="lesson-footer">${prev}${next}</div>`;
}

// ===================== LESSON DATA =====================
const LESSONS = [

// ===== LEKCE 0: ÃšVOD =====
{
  short: 'Start',
  render() {
    return `<div class="welcome">
      <span class="big-emoji">ğŸ¨ğŸ“š</span>
      <h1>Rychlokurz podvojnÃ©ho ÃºÄetnictvÃ­</h1>
      <p class="subtitle">Pro hotelovou Å¡kolu â€“ od naprostÃ½ch zÃ¡kladÅ¯ k jistotÄ› u zkouÅ¡ky</p>
      <div class="lesson" style="text-align:left;margin-top:24px">
        <h3>Jak kurz funguje</h3>
        <ul>
          <li><strong>14 lekcÃ­</strong> â€“ od zÃ¡kladÅ¯ po zÃ¡soby, ceniny, zÃ¡lohy a zÃ¡vÄ›reÄnÃ½ test</li>
          <li><strong>+ 8 bonusovÃ½ch lekcÃ­</strong> â€“ pro Å¡ikovnÃ© a zvÃ­davÃ© (odemknou se po zÃ¡vÄ›reÄnÃ©m testu)</li>
          <li><strong>ZÃ¡vÄ›reÄnÃ½ test</strong> â€“ simulace opravnÃ© zkouÅ¡ky</li>
          <li>KaÅ¾dÃ¡ lekce mÃ¡ <strong>cviÄenÃ­</strong> â€“ uÄ se praxÃ­!</li>
          <li>Na konci dostaneÅ¡ <strong>tahÃ¡k k tisku</strong> (tlaÄÃ­tko ğŸ–¨ï¸ nahoÅ™e)</li>
          <li>VÅ¡echny pÅ™Ã­klady jsou z <strong>prostÅ™edÃ­ hotelu</strong> ğŸ¨</li>
        </ul>
        <div class="tip">
          <strong>Tip:</strong> Projdi lekce postupnÄ›. KaÅ¾dÃ¡ stavÃ­ na pÅ™edchozÃ­. U cviÄenÃ­ se neboj chybovat â€“ chyby jsou nejlepÅ¡Ã­ uÄitel!
        </div>
        <div class="btn-group">
          <button class="btn btn-primary btn-lg pop" onclick="APP.completeLesson(0);nextLesson()" style="font-size:1.1rem;padding:14px 36px">
            ZaÄÃ­t se uÄit! â†’
          </button>
          <button class="btn btn-outline" onclick="APP.completed = new Set(); APP.save(); APP.renderNav(); APP.showLesson(0);">
            Resetovat postup
          </button>
        </div>
      </div>
    </div>`;
  }
},

// ===== LEKCE 1: CO JE ÃšÄŒETNICTVÃ =====
{
  short: 'ZÃ¡klady',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“–</span> Lekce 1: Co je ÃºÄetnictvÃ­ a proÄ existuje</h2>

      <div class="analogy">
        <div class="analogy-title">ğŸ¨ PÅ™edstav si...</div>
        <p>PÅ™edstav si, Å¾e jsi manaÅ¾erka hotelu. KaÅ¾dÃ½ den pÅ™ichÃ¡zejÃ­ hostÃ©, platÃ­ za pokoje, ty nakupujeÅ¡ potraviny, platÃ­Å¡ zamÄ›stnance, ÃºÄty za elektÅ™inu...</p>
        <p><strong>Jak zjistÃ­Å¡, jestli hotel vydÄ›lÃ¡vÃ¡, nebo prodÄ›lÃ¡vÃ¡?</strong></p>
        <p>PÅ™esnÄ› k tomu slouÅ¾Ã­ <strong>ÃºÄetnictvÃ­</strong> â€“ je to systÃ©m, jak si zapisovat VÅ ECHNY finanÄnÃ­ operace hotelu.</p>
      </div>

      <h3>Co je ÃºÄetnictvÃ­?</h3>
      <p>ÃšÄetnictvÃ­ je <strong>uspoÅ™Ã¡danÃ½ systÃ©m evidence</strong> (zÃ¡znamÅ¯) o tom, co se dÄ›je s penÄ›zi a majetkem firmy. Je to jako finanÄnÃ­ denÃ­k, ale s pÅ™esnÃ½mi pravidly.</p>

      <h3>ProÄ â€podvojnÃ©"?</h3>
      <div class="highlight">
        <strong>PodvojnÃ©</strong> = kaÅ¾dÃ¡ operace se zapisuje na <strong>DVÄš mÃ­sta</strong> (dva ÃºÄty) souÄasnÄ›.
      </div>

      <div class="analogy">
        <div class="analogy-title">ğŸ«— PÅ™edstav si dvÄ› sklenice s vodou</div>
        <p>KdyÅ¾ pÅ™elijeÅ¡ vodu z jednÃ© sklenice do druhÃ©, <strong>v jednÃ© ubyde</strong> a <strong>ve druhÃ© pÅ™ibyde</strong> â€“ pÅ™esnÄ› stejnÃ© mnoÅ¾stvÃ­.</p>
        <p>ÃšÄetnictvÃ­ funguje ÃºplnÄ› stejnÄ›! KdyÅ¾ host zaplatÃ­ za pokoj hotovÄ›:</p>
        <ul>
          <li>V <strong>pokladnÄ› pÅ™ibydou penÃ­ze</strong> ğŸ’° (zapsÃ¡no na jednom ÃºÄtu)</li>
          <li>Hotel si <strong>zapÃ­Å¡e trÅ¾bu</strong> ğŸ“ˆ (zapsÃ¡no na druhÃ©m ÃºÄtu)</li>
        </ul>
        <p><strong>VÅ¾dy dvÄ› strany. VÅ¾dy stejnÃ¡ ÄÃ¡stka. Proto PODVOJNÃ‰.</strong></p>
      </div>

      <h3>3 zÃ¡kladnÃ­ pravidla</h3>
      <ol>
        <li><strong>KaÅ¾dÃ¡ operace mÃ¡ 2 zÃ¡pisy</strong> â€“ na stranu MD (MÃ¡ dÃ¡ti) a stranu D (Dal)</li>
        <li><strong>ÄŒÃ¡stky na obou stranÃ¡ch jsou vÅ¾dy stejnÃ©</strong> â€“ to, co na jednÃ© stranÄ› pÅ™ibyde, na druhÃ© ubyde (nebo vznikne)</li>
        <li><strong>MusÃ­ se to rovnat!</strong> â€“ celkovÄ›: AKTIVA = PASIVA (o tom vÃ­c v dalÅ¡Ã­ lekci)</li>
      </ol>

      <div class="tip">
        <strong>ProÄ se to uÄit?</strong> ÃšÄetnictvÃ­ musÃ­ vÃ©st ze zÃ¡kona kaÅ¾dÃ¡ firma. V hotelnictvÃ­ je dÅ¯leÅ¾itÃ© pro sledovÃ¡nÃ­ trÅ¾eb, nÃ¡kladÅ¯ na provoz, mezd zamÄ›stnancÅ¯, zÃ¡sob v kuchyni...
      </div>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z â€“ OvÄ›Å™ si porozumÄ›nÃ­</div>
        ${makeQuiz([
          {
            q: 'ProÄ se ÃºÄetnictvÃ­ nazÃ½vÃ¡ â€podvojnÃ©"?',
            opts: ['ProtoÅ¾e se dÄ›lÃ¡ dvakrÃ¡t roÄnÄ›','ProtoÅ¾e kaÅ¾dÃ¡ operace se zapisuje na dva ÃºÄty souÄasnÄ›','ProtoÅ¾e existujÃ­ dva typy firem','ProtoÅ¾e se pouÅ¾Ã­vajÃ­ dvÄ› mÄ›ny'],
            correct: 1,
            explanation: 'KaÅ¾dÃ¡ ÃºÄetnÃ­ operace se vÅ¾dy zapÃ­Å¡e na DVA ÃºÄty â€“ jeden na stranu MD a druhÃ½ na stranu D.'
          },
          {
            q: 'Host zaplatil za pokoj 2 000 KÄ hotovÄ›. Co se stane v ÃºÄetnictvÃ­?',
            opts: ['ZapÃ­Å¡e se jen pÅ™Ã­jem do pokladny','Na jednom ÃºÄtu pÅ™ibudou penÃ­ze a na druhÃ©m se zapÃ­Å¡e trÅ¾ba','Nic, hotovost se nezapisuje','ZapÃ­Å¡e se jen trÅ¾ba'],
            correct: 1,
            explanation: 'V pokladnÄ› pÅ™ibudou penÃ­ze (jeden ÃºÄet) a zÃ¡roveÅˆ se zapÃ­Å¡e trÅ¾ba za sluÅ¾by (druhÃ½ ÃºÄet). VÅ¾dy DVÄš strany!'
          },
          {
            q: 'Co musÃ­ v podvojnÃ©m ÃºÄetnictvÃ­ VÅ½DY platit?',
            opts: ['PÅ™Ã­jmy musÃ­ bÃ½t vÄ›tÅ¡Ã­ neÅ¾ vÃ½daje','Aktiva se musÃ­ rovnat PasivÅ¯m','Firma musÃ­ mÃ­t alespoÅˆ 10 ÃºÄtÅ¯','ÃšÄetnictvÃ­ musÃ­ vÃ©st ÃºÄetnÃ­'],
            correct: 1,
            explanation: 'BilanÄnÃ­ rovnice AKTIVA = PASIVA musÃ­ platit vÅ¾dy. To je zÃ¡klad celÃ©ho systÃ©mu.'
          }
        ], 'quiz1', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== LEKCE 2: ROZVAHA =====
{
  short: 'Rozvaha',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“¸</span> Lekce 2: Rozvaha â€“ fotka financÃ­ hotelu</h2>

      <p><strong>Rozvaha</strong> (neboli bilance) je pÅ™ehled toho, co firma vlastnÃ­ a odkud na to vzala penÃ­ze. Je to jako <strong>fotka finanÄnÃ­ho stavu</strong> hotelu v jednom konkrÃ©tnÃ­m okamÅ¾iku.</p>

      <div class="equation">
        <div class="eq-box eq-aktiva">AKTIVA<br><small>Co hotel MÃ</small></div>
        <div class="eq-sign">=</div>
        <div class="eq-box eq-pasiva">PASIVA<br><small>ODKUD to mÃ¡</small></div>
      </div>

      <div class="highlight">
        <strong>BilanÄnÃ­ rovnice: AKTIVA = PASIVA</strong><br>
        Toto musÃ­ platit VÅ½DY. Pokud se to nerovnÃ¡, nÄ›kde je chyba!
      </div>

      <h3 style="color:var(--blue)">AKTIVA â€“ Co hotel MÃ (majetek)</h3>
      <div class="analogy">
        <p>Kdyby ses rozhlÃ©dla po hotelu â€“ vÅ¡e, na co bys ukÃ¡zala a Å™ekla â€tohle je naÅ¡e", jsou <strong>aktiva</strong>:</p>
      </div>
      <ul>
        <li><strong>StÃ¡lÃ¡ aktiva</strong> (dlouhodobÃ½ majetek â€“ slouÅ¾Ã­ dÃ©le neÅ¾ 1 rok):
          <ul>
            <li>ğŸ¢ Budova hotelu, pozemek</li>
            <li>ğŸ›ï¸ VybavenÃ­ pokojÅ¯, kuchynÄ›, auto</li>
            <li>ğŸ’» Software pro rezervace</li>
          </ul>
        </li>
        <li><strong>ObÄ›Å¾nÃ¡ aktiva</strong> (krÃ¡tkodobÃ½ majetek â€“ stÃ¡le se mÄ›nÃ­):
          <ul>
            <li>ğŸ¥© ZÃ¡soby (potraviny v kuchyni, zboÅ¾Ã­ v minibaru)</li>
            <li>ğŸ’° Pokladna (hotovost)</li>
            <li>ğŸ¦ BankovnÃ­ ÃºÄet</li>
            <li>ğŸ“‹ PohledÃ¡vky (hostÃ©/firmy, co jeÅ¡tÄ› nezaplatili)</li>
          </ul>
        </li>
      </ul>

      <h3 style="color:var(--green)">PASIVA â€“ ODKUD to hotel mÃ¡ (zdroje)</h3>
      <div class="analogy">
        <p>OtÃ¡zka â€odkud na to mÃ¡me penÃ­ze?":</p>
      </div>
      <ul>
        <li><strong>VlastnÃ­ kapitÃ¡l</strong> (vlastnÃ­ zdroje):
          <ul>
            <li>ğŸ’ ZÃ¡kladnÃ­ kapitÃ¡l (co vloÅ¾il majitel)</li>
            <li>ğŸ“ˆ Zisk (co hotel vydÄ›lal)</li>
          </ul>
        </li>
        <li><strong>CizÃ­ zdroje</strong> (dluhy):
          <ul>
            <li>ğŸ¦ BankovnÃ­ ÃºvÄ›r</li>
            <li>ğŸ“„ Dluhy dodavatelÅ¯m (nezaplacenÃ© faktury)</li>
            <li>ğŸ‘· Dluhy zamÄ›stnancÅ¯m (nevyplacenÃ© mzdy)</li>
          </ul>
        </li>
      </ul>

      <div class="warning">
        <strong>Pozor!</strong> Pasiva NEJSOU nic Å¡patnÃ©ho! ZnamenajÃ­ jen â€zdroje financovÃ¡nÃ­". I zisk je pasivum, protoÅ¾e je to zdroj, ze kterÃ©ho hotel financuje svÅ¯j majetek.
      </div>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ CviÄenÃ­: RozÅ™aÄ poloÅ¾ky do Aktiv a Pasiv</div>
        <p>PÅ™etÃ¡hni kaÅ¾dou poloÅ¾ku do sprÃ¡vnÃ© kategorie:</p>
        <div class="dnd-source" id="dndSource2">
          <div class="dnd-item" draggable="true" data-correct="aktiva" style="background:var(--blue-bg);color:var(--blue)">ğŸ’° Pokladna</div>
          <div class="dnd-item" draggable="true" data-correct="pasiva" style="background:var(--green-bg);color:var(--green)">ğŸ¦ BankovnÃ­ ÃºvÄ›r</div>
          <div class="dnd-item" draggable="true" data-correct="aktiva" style="background:var(--blue-bg);color:var(--blue)">ğŸ¢ Budova hotelu</div>
          <div class="dnd-item" draggable="true" data-correct="pasiva" style="background:var(--green-bg);color:var(--green)">ğŸ’ ZÃ¡kladnÃ­ kapitÃ¡l</div>
          <div class="dnd-item" draggable="true" data-correct="aktiva" style="background:var(--blue-bg);color:var(--blue)">ğŸ¥© ZÃ¡soby potravin</div>
          <div class="dnd-item" draggable="true" data-correct="pasiva" style="background:var(--green-bg);color:var(--green)">ğŸ“„ Dluh dodavateli</div>
          <div class="dnd-item" draggable="true" data-correct="aktiva" style="background:var(--blue-bg);color:var(--blue)">ğŸ¦ PenÃ­ze na ÃºÄtu</div>
          <div class="dnd-item" draggable="true" data-correct="pasiva" style="background:var(--green-bg);color:var(--green)">ğŸ“ˆ NerozdÄ›lenÃ½ zisk</div>
          <div class="dnd-item" draggable="true" data-correct="aktiva" style="background:var(--blue-bg);color:var(--blue)">ğŸ“‹ PohledÃ¡vka za hostem</div>
          <div class="dnd-item" draggable="true" data-correct="pasiva" style="background:var(--green-bg);color:var(--green)">ğŸ‘· Dluh zamÄ›stnancÅ¯m</div>
        </div>
        <div class="dnd-targets">
          <div>
            <div class="dnd-target-label" style="color:var(--blue)">AKTIVA (Co hotel MÃ)</div>
            <div class="dnd-zone" id="dndAktiva" data-target="aktiva"></div>
          </div>
          <div>
            <div class="dnd-target-label" style="color:var(--green)">PASIVA (ODKUD to mÃ¡)</div>
            <div class="dnd-zone" id="dndPasiva" data-target="pasiva"></div>
          </div>
        </div>
        <div class="feedback" id="dnd2feedback"></div>
        <div class="btn-group">
          <button class="btn btn-accent" onclick="checkDnd2(${idx})">Zkontrolovat âœ“</button>
        </div>
      </div>
      ${makeFooter(idx)}
    </div>`;
  },
  afterRender() { initDragDrop(); }
},

// ===== LEKCE 3: ÃšÄŒTY A T-TABULKA =====
{
  short: 'T-ÃºÄty',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“Š</span> Lekce 3: ÃšÄty a T-tabulka</h2>

      <p>TeÄ pÅ™ichÃ¡zÃ­ to nejdÅ¯leÅ¾itÄ›jÅ¡Ã­ â€“ <strong>jak se ÃºÄtuje</strong>. KaÅ¾dÃ½ ÃºÄet si mÅ¯Å¾eÅ¡ pÅ™edstavit jako tabulku ve tvaru pÃ­smene <strong>T</strong>:</p>

      <div class="t-account" style="max-width:350px">
        <div class="t-account-title">211 â€“ Pokladna</div>
        <div class="t-account-body">
          <div class="t-account-md">
            <div class="t-account-md-header">MÃ¡ dÃ¡ti (MD)<br><small>levÃ¡ strana</small></div>
          </div>
          <div class="t-account-d">
            <div class="t-account-d-header">Dal (D)<br><small>pravÃ¡ strana</small></div>
          </div>
        </div>
      </div>

      <div class="highlight">
        <strong>MD = MÃ¡ dÃ¡ti = levÃ¡ strana</strong> (nÄ›kdy se Å™Ã­kÃ¡ â€na vrub")<br>
        <strong>D = Dal = pravÃ¡ strana</strong> (nÄ›kdy se Å™Ã­kÃ¡ â€ve prospÄ›ch")
      </div>

      <div class="analogy">
        <div class="analogy-title">ğŸ§  Jak si zapamatovat MD a D?</div>
        <p><strong>â€MaDa DaPra"</strong></p>
        <ul>
          <li><strong>Ma</strong>-dÃ¡ti = levÃ¡ (M je jako â€vlevo", pÃ­Å¡eme zleva)</li>
          <li><strong>Da</strong>l = <strong>Pra</strong>vÃ¡ strana</li>
        </ul>
        <p>Nebo jeÅ¡tÄ› jednoduÅ¡eji: <strong>MD = vlevo, D = vpravo</strong>. VÅ¾dy. Bez vÃ½jimky.</p>
      </div>

      <h3>Jak se ÃºÄtuje na kterou stranu?</h3>
      <p>Tohle je <strong>klÃ­ÄovÃ© pravidlo</strong> celÃ©ho ÃºÄetnictvÃ­:</p>

      <table class="acc-table">
        <tr><th>Typ ÃºÄtu</th><th>PÅ™Ã­rÅ¯stek (+)</th><th>Ãšbytek (âˆ’)</th><th>PÅ™Ã­klad</th></tr>
        <tr><td><strong style="color:var(--blue)">AktivnÃ­</strong> (majetek)</td><td style="color:var(--green);font-weight:700">MD â† sem</td><td>D</td><td>211 Pokladna, 221 Banka</td></tr>
        <tr><td><strong style="color:var(--green)">PasivnÃ­</strong> (zdroje)</td><td>MD</td><td style="color:var(--green);font-weight:700">D â† sem</td><td>321 DodavatelÃ©, 411 KapitÃ¡l</td></tr>
        <tr><td><strong style="color:var(--red)">NÃ¡kladovÃ½</strong></td><td style="color:var(--green);font-weight:700">MD â† sem</td><td>D</td><td>501 SpotÅ™eba mat., 521 Mzdy</td></tr>
        <tr><td><strong style="color:var(--purple)">VÃ½nosovÃ½</strong></td><td>MD</td><td style="color:var(--green);font-weight:700">D â† sem</td><td>602 TrÅ¾by za sluÅ¾by</td></tr>
      </table>

      <div class="tip">
        <strong>MnemotechnickÃ¡ pomÅ¯cka:</strong><br>
        <strong>AktivnÃ­ a NÃ¡kladovÃ©</strong> ÃºÄty = pÅ™Ã­rÅ¯stky na <strong>MD</strong> (levÃ© stranÄ›)<br>
        <strong>PasivnÃ­ a VÃ½nosovÃ©</strong> ÃºÄty = pÅ™Ã­rÅ¯stky na <strong>D</strong> (pravÃ© stranÄ›)<br><br>
        ProstÄ›: <strong>A + N â†’ MD</strong> &nbsp;|&nbsp; <strong>P + V â†’ D</strong>
      </div>

      <h3>PÅ™Ã­klad: Host zaplatil za pokoj 2 000 KÄ hotovÄ›</h3>
      <p>Co se stane?</p>
      <ul>
        <li>V <strong>pokladnÄ›</strong> (aktivnÃ­ ÃºÄet 211) <strong>pÅ™ibydou</strong> penÃ­ze â†’ zapisujeme na <strong>MD</strong></li>
        <li><strong>TrÅ¾ba za sluÅ¾by</strong> (vÃ½nosovÃ½ ÃºÄet 602) <strong>pÅ™ibyde</strong> â†’ zapisujeme na <strong>D</strong></li>
      </ul>

      <div style="display:flex;gap:16px;flex-wrap:wrap;justify-content:center">
        <div class="t-account" style="flex:1;min-width:200px;max-width:280px">
          <div class="t-account-title">211 â€“ Pokladna</div>
          <div class="t-account-body">
            <div class="t-account-md">
              <div class="t-account-md-header">MD</div>
              <div class="t-entry"><span class="label">TrÅ¾ba za pokoj</span><span class="amount" style="color:var(--green)">2 000</span></div>
            </div>
            <div class="t-account-d"><div class="t-account-d-header">D</div></div>
          </div>
        </div>
        <div class="t-account" style="flex:1;min-width:200px;max-width:280px">
          <div class="t-account-title">602 â€“ TrÅ¾by za sluÅ¾by</div>
          <div class="t-account-body">
            <div class="t-account-md"><div class="t-account-md-header">MD</div></div>
            <div class="t-account-d">
              <div class="t-account-d-header">D</div>
              <div class="t-entry"><span class="label">TrÅ¾ba za pokoj</span><span class="amount" style="color:var(--green)">2 000</span></div>
            </div>
          </div>
        </div>
      </div>
      <p style="text-align:center;font-weight:600;color:var(--primary)">ZÃ¡pis: 211 / 602 &nbsp;&nbsp; (Äteme: â€dvÄ› stÄ› jedenÃ¡ct lomeno Å¡est set dva")</p>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ CviÄenÃ­: Na kterou stranu T-ÃºÄtu to patÅ™Ã­?</div>
        <p>U kaÅ¾dÃ© situace klikni na sprÃ¡vnou stranu (MD nebo D) pro danÃ½ ÃºÄet:</p>
        <div id="tClickExercise"></div>
        <div class="feedback" id="tClickFeedback"></div>
      </div>
      ${makeFooter(idx)}
    </div>`;
  },
  afterRender(idx) {
    const exercises = [
      {q: 'Do <strong>pokladny</strong> (aktivnÃ­ ÃºÄet) PÅ˜IBYDOU penÃ­ze:', correct: 'md', hint: 'AktivnÃ­ ÃºÄet + pÅ™Ã­rÅ¯stek = MD'},
      {q: 'Z <strong>bankovnÃ­ho ÃºÄtu</strong> (aktivnÃ­ ÃºÄet) ODEJDOU penÃ­ze:', correct: 'd', hint: 'AktivnÃ­ ÃºÄet + Ãºbytek = D'},
      {q: '<strong>DodavatelÅ¯m</strong> (pasivnÃ­ ÃºÄet) vznikne NOVÃ dluh:', correct: 'd', hint: 'PasivnÃ­ ÃºÄet + pÅ™Ã­rÅ¯stek = D'},
      {q: 'Dluh <strong>dodavateli</strong> (pasivnÃ­ ÃºÄet) se SNÃÅ½Ã (zaplatÃ­me):', correct: 'md', hint: 'PasivnÃ­ ÃºÄet + Ãºbytek = MD'},
      {q: 'Vznikne <strong>nÃ¡klad</strong> na spotÅ™ebu materiÃ¡lu (5xx):', correct: 'md', hint: 'NÃ¡kladovÃ½ ÃºÄet + pÅ™Ã­rÅ¯stek = MD'},
      {q: 'Vznikne <strong>vÃ½nos</strong> â€“ trÅ¾ba za ubytovÃ¡nÃ­ (6xx):', correct: 'd', hint: 'VÃ½nosovÃ½ ÃºÄet + pÅ™Ã­rÅ¯stek = D'},
    ];
    let answered = 0;
    const container = document.getElementById('tClickExercise');
    container.innerHTML = exercises.map((ex, i) => `
      <div style="background:var(--bg2);border-radius:var(--radius-sm);padding:14px;margin:10px 0" id="tclick_${i}">
        <p style="margin-bottom:10px;font-size:.92rem">${i + 1}. ${ex.q}</p>
        <div style="display:flex;gap:10px">
          <div class="t-click-area" style="flex:1;background:var(--blue-bg);color:var(--blue)" onclick="checkTClick(${i},'md','${ex.correct}',${idx})">MD (levÃ¡)</div>
          <div class="t-click-area" style="flex:1;background:var(--green-bg);color:var(--green)" onclick="checkTClick(${i},'d','${ex.correct}',${idx})">D (pravÃ¡)</div>
        </div>
        <div class="feedback" id="tclick_fb_${i}" style="font-size:.85rem"></div>
      </div>
    `).join('');
    window.tClickState = {};
    window.tClickTotal = exercises.length;
    window.tClickHints = exercises.map(e => e.hint);
  }
},

// ===== LEKCE 4: ÃšÄŒTOVÃ OSNOVA =====
{
  short: 'ÃšÄty',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ—ºï¸</span> Lekce 4: ÃšÄtovÃ¡ osnova â€“ mapa ÃºÄtÅ¯</h2>

      <p>KaÅ¾dÃ½ ÃºÄet mÃ¡ svÃ© <strong>tÅ™Ã­mÃ­stnÃ© ÄÃ­slo</strong>. PrvnÃ­ ÄÃ­slice Å™Ã­kÃ¡, do kterÃ© â€Å¡katulky" ÃºÄet patÅ™Ã­. PÅ™edstav si to jako <strong>mapu</strong>, kde kaÅ¾dÃ¡ ulice mÃ¡ svÃ© ÄÃ­slo:</p>

      <div class="class-grid">
        <div class="class-card" style="border-color:var(--blue);background:var(--blue-bg)">
          <span class="num" style="color:var(--blue)">0</span>
          <span class="name">DlouhodobÃ½ majetek</span>
          <small>budova, vybavenÃ­, auto</small>
        </div>
        <div class="class-card" style="border-color:var(--blue);background:var(--blue-bg)">
          <span class="num" style="color:var(--blue)">1</span>
          <span class="name">ZÃ¡soby</span>
          <small>materiÃ¡l, zboÅ¾Ã­</small>
        </div>
        <div class="class-card" style="border-color:var(--blue);background:var(--blue-bg)">
          <span class="num" style="color:var(--blue)">2</span>
          <span class="name">Finance</span>
          <small>pokladna, banka, ÃºvÄ›ry</small>
        </div>
        <div class="class-card" style="border-color:var(--orange);background:var(--orange-bg)">
          <span class="num" style="color:var(--orange)">3</span>
          <span class="name">ZÃºÄtovacÃ­ vztahy</span>
          <small>odbÄ›ratelÃ©, dodavatelÃ©, DPH</small>
        </div>
        <div class="class-card" style="border-color:var(--green);background:var(--green-bg)">
          <span class="num" style="color:var(--green)">4</span>
          <span class="name">KapitÃ¡l a dluhy</span>
          <small>vlastnÃ­ kapitÃ¡l, ÃºvÄ›ry</small>
        </div>
        <div class="class-card" style="border-color:var(--red);background:var(--red-bg)">
          <span class="num" style="color:var(--red)">5</span>
          <span class="name">NÃ¡klady</span>
          <small>spotÅ™eba, mzdy, sluÅ¾by</small>
        </div>
        <div class="class-card" style="border-color:var(--purple);background:var(--purple-bg)">
          <span class="num" style="color:var(--purple)">6</span>
          <span class="name">VÃ½nosy</span>
          <small>trÅ¾by za sluÅ¾by, zboÅ¾Ã­</small>
        </div>
        <div class="class-card" style="border-color:var(--text2);background:var(--bg3)">
          <span class="num" style="color:var(--text2)">7</span>
          <span class="name">ZÃ¡vÄ›rkovÃ© ÃºÄty</span>
          <small>uzÃ¡vÄ›rka roku</small>
        </div>
      </div>

      <div class="tip">
        <strong>Jak si zapamatovat:</strong> <strong>0-3</strong> = rozvahovÃ© ÃºÄty (aktiva a pasiva), <strong>4</strong> = kapitÃ¡l, <strong>5</strong> = nÃ¡klady (to, co hotel UTRATÃ), <strong>6</strong> = vÃ½nosy (to, co hotel VYDÄšLÃ)
      </div>

      <h3>TOP ÃºÄty, kterÃ© musÃ­Å¡ znÃ¡t</h3>
      <table class="acc-table">
        <tr><th>ÄŒÃ­slo</th><th>NÃ¡zev</th><th>Typ</th><th>PÅ™Ã­klad z hotelu</th></tr>
        <tr><td class="num">211</td><td>Pokladna</td><td style="color:var(--blue)">AktivnÃ­</td><td>Hotovost na recepci</td></tr>
        <tr><td class="num">221</td><td>Banka</td><td style="color:var(--blue)">AktivnÃ­</td><td>FiremnÃ­ bankovnÃ­ ÃºÄet</td></tr>
        <tr><td class="num">261</td><td>PenÃ­ze na cestÄ›</td><td style="color:var(--blue)">AktivnÃ­ (pÅ™echodnÃ½!)</td><td>PÅ™i pÅ™evodu pokladnaâ†”banka; na konci roku zÅ¯statek 0</td></tr>
        <tr><td class="num">112</td><td>MateriÃ¡l na skladÄ›</td><td style="color:var(--blue)">AktivnÃ­</td><td>ÄŒisticÃ­ prostÅ™edky, ruÄnÃ­ky</td></tr>
        <tr><td class="num">132</td><td>ZboÅ¾Ã­ na skladÄ›</td><td style="color:var(--blue)">AktivnÃ­</td><td>Minibar, dÃ¡rkovÃ½ obchod</td></tr>
        <tr><td class="num">311</td><td>OdbÄ›ratelÃ©</td><td style="color:var(--blue)">AktivnÃ­</td><td>Firma objednala pokoj, jeÅ¡tÄ› nezaplatila</td></tr>
        <tr><td class="num">321</td><td>DodavatelÃ©</td><td style="color:var(--green)">PasivnÃ­</td><td>Faktura za potraviny, jeÅ¡tÄ› nezaplacenÃ¡</td></tr>
        <tr><td class="num">331</td><td>ZamÄ›stnanci</td><td style="color:var(--green)">PasivnÃ­</td><td>NevyplacenÃ© mzdy recepÄnÃ­ch</td></tr>
        <tr><td class="num">343</td><td>DPH</td><td style="color:var(--orange)">Akt./Pas.</td><td>DaÅˆovÃ¡ povinnost</td></tr>
        <tr><td class="num">411</td><td>ZÃ¡kladnÃ­ kapitÃ¡l</td><td style="color:var(--green)">PasivnÃ­</td><td>Co vloÅ¾il majitel hotelu</td></tr>
        <tr><td class="num">501</td><td>SpotÅ™eba materiÃ¡lu</td><td style="color:var(--red)">NÃ¡kladovÃ½</td><td>Potraviny v kuchyni, ÄistÃ­cÃ­ prostÅ™edky</td></tr>
        <tr><td class="num">502</td><td>SpotÅ™eba energie</td><td style="color:var(--red)">NÃ¡kladovÃ½</td><td>ElektÅ™ina, plyn, voda</td></tr>
        <tr><td class="num">518</td><td>OstatnÃ­ sluÅ¾by</td><td style="color:var(--red)">NÃ¡kladovÃ½</td><td>PrÃ¡delna, internet, reklama</td></tr>
        <tr><td class="num">521</td><td>MzdovÃ© nÃ¡klady</td><td style="color:var(--red)">NÃ¡kladovÃ½</td><td>HrubÃ© mzdy zamÄ›stnancÅ¯</td></tr>
        <tr><td class="num">602</td><td>TrÅ¾by za sluÅ¾by</td><td style="color:var(--purple)">VÃ½nosovÃ½</td><td>UbytovÃ¡nÃ­, wellness, konference</td></tr>
        <tr><td class="num">604</td><td>TrÅ¾by za zboÅ¾Ã­</td><td style="color:var(--purple)">VÃ½nosovÃ½</td><td>Minibar, dÃ¡rkovÃ½ obchod</td></tr>
      </table>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ CviÄenÃ­: PÅ™iÅ™aÄ ÄÃ­slo ÃºÄtu k nÃ¡zvu</div>
        <p>Klikni postupnÄ› na ÄÃ­slo vlevo a odpovÃ­dajÃ­cÃ­ nÃ¡zev vpravo:</p>
        <div class="match-grid" id="matchGrid4"></div>
        <div class="feedback" id="match4feedback"></div>
        <div class="btn-group" id="match4btns" style="display:none">
          <button class="btn btn-primary" onclick="nextLesson()">PokraÄovat â†’</button>
        </div>
      </div>
      ${makeFooter(idx)}
    </div>`;
  },
  afterRender(idx) {
    const pairs = [
      ['211','Pokladna'],['221','Banka'],['321','DodavatelÃ©'],
      ['501','SpotÅ™eba materiÃ¡lu'],['602','TrÅ¾by za sluÅ¾by'],['521','MzdovÃ© nÃ¡klady'],
      ['331','ZamÄ›stnanci'],['311','OdbÄ›ratelÃ©']
    ];
    // ZamÃ­chej strany nezÃ¡visle
    const lefts = pairs.map(p => p[0]).sort(() => Math.random() - 0.5);
    const rights = pairs.map(p => p[1]).sort(() => Math.random() - 0.5);
    const grid = document.getElementById('matchGrid4');
    grid.innerHTML = '<div>' + lefts.map(l => `<div class="match-item match-left" data-val="${l}" onclick="matchClick(this,'left',${idx})" style="font-family:monospace;font-size:1.1rem">${l}</div>`).join('') +
      '</div><div>' + rights.map(r => `<div class="match-item match-right" data-val="${r}" onclick="matchClick(this,'right',${idx})">${r}</div>`).join('') + '</div>';
    window.matchPairs = Object.fromEntries(pairs);
    window.matchSelected = {left: null, right: null};
    window.matchedCount = 0;
    window.matchTotal = pairs.length;
  }
},

// ===== LEKCE 5: ÃšÄŒETNÃ PÅ˜ÃPADY =====
{
  short: 'ÃšÄtovÃ¡nÃ­',
  render(idx) {
    const cases = [
      {desc:'Host platÃ­ <strong>hotovÄ› za ubytovÃ¡nÃ­</strong> 3 000 KÄ', md:'211', d:'602', mdName:'Pokladna', dName:'TrÅ¾by za sluÅ¾by', amount:'3 000',
        why:'PÅ™ibydou penÃ­ze v pokladnÄ› (aktivnÃ­ â†’ MD) a vznikne trÅ¾ba za sluÅ¾by (vÃ½nosovÃ½ â†’ D)'},
      {desc:'Hotel <strong>nakoupil potraviny</strong> za hotovÃ© za 5 000 KÄ', md:'501', d:'211', mdName:'SpotÅ™eba materiÃ¡lu', dName:'Pokladna', amount:'5 000',
        why:'Vznikne nÃ¡klad na materiÃ¡l (nÃ¡kladovÃ½ â†’ MD) a z pokladny ubudou penÃ­ze (aktivnÃ­, Ãºbytek â†’ D)'},
      {desc:'PÅ™iÅ¡la <strong>faktura za elektÅ™inu</strong> 8 000 KÄ', md:'502', d:'321', mdName:'SpotÅ™eba energie', dName:'DodavatelÃ©', amount:'8 000',
        why:'Vznikne nÃ¡klad (nÃ¡kladovÃ½ â†’ MD) a vznikne dluh dodavateli (pasivnÃ­, pÅ™Ã­rÅ¯stek â†’ D)'},
      {desc:'Hotel <strong>zaplatil fakturu</strong> dodavateli z banky 8 000 KÄ', md:'321', d:'221', mdName:'DodavatelÃ©', dName:'Banka', amount:'8 000',
        why:'Dluh dodavateli se snÃ­Å¾Ã­ (pasivnÃ­, Ãºbytek â†’ MD) a z banky odejdou penÃ­ze (aktivnÃ­, Ãºbytek â†’ D)'},
      {desc:'Host zaplatil <strong>kartou za ubytovÃ¡nÃ­</strong> 4 500 KÄ', md:'221', d:'602', mdName:'Banka', dName:'TrÅ¾by za sluÅ¾by', amount:'4 500',
        why:'PÅ™ibydou penÃ­ze na bankovnÃ­m ÃºÄtu (aktivnÃ­ â†’ MD) a vznikne trÅ¾ba (vÃ½nosovÃ½ â†’ D)'},
      {desc:'<strong>PÅ™edpis hrubÃ½ch mezd</strong> zamÄ›stnancÅ¯m 50 000 KÄ', md:'521', d:'331', mdName:'MzdovÃ© nÃ¡klady', dName:'ZamÄ›stnanci', amount:'50 000',
        why:'Vznikne nÃ¡klad na mzdy (nÃ¡kladovÃ½ â†’ MD) a vznikne dluh zamÄ›stnancÅ¯m (pasivnÃ­ â†’ D)'},
      {desc:'<strong>VÃ½plata mezd</strong> zamÄ›stnancÅ¯m z banky 50 000 KÄ', md:'331', d:'221', mdName:'ZamÄ›stnanci', dName:'Banka', amount:'50 000',
        why:'Dluh zamÄ›stnancÅ¯m se snÃ­Å¾Ã­ (pasivnÃ­, Ãºbytek â†’ MD) a z banky odejdou penÃ­ze (aktivnÃ­, Ãºbytek â†’ D)'},
      {desc:'NÃ¡kup <strong>zboÅ¾Ã­ do minibaru</strong> na fakturu 6 000 KÄ', md:'132', d:'321', mdName:'ZboÅ¾Ã­ na skladÄ›', dName:'DodavatelÃ©', amount:'6 000',
        why:'PÅ™ibyde zboÅ¾Ã­ na skladÄ› (aktivnÃ­ â†’ MD) a vznikne dluh dodavateli (pasivnÃ­ â†’ D)'},
      {desc:'<strong>VÃ½bÄ›r penÄ›z z banky do pokladny</strong> 10 000 KÄ (2 kroky pÅ™es 261!)', md:'261', d:'221', mdName:'PenÃ­ze na cestÄ›', dName:'Banka', amount:'10 000',
        why:'1. krok: Z banky (221 D) jdou penÃ­ze na 261 (261 MD). PovinnÄ› pÅ™es ÃºÄet 261.'},
      {desc:'<strong>VBU â€“ penÃ­ze z â€cestyâ€œ pÅ™iÅ¡ly do pokladny</strong> 10 000 KÄ', md:'211', d:'261', mdName:'Pokladna', dName:'PenÃ­ze na cestÄ›', amount:'10 000',
        why:'2. krok: Z 261 (261 D) pÅ™ijdou penÃ­ze do pokladny (211 MD). ÃšÄet 261 na konci roku nesmÃ­ mÃ­t zÅ¯statek!'},
      {desc:'<strong>Odvod hotovosti z pokladny na ÃºÄet</strong> 10 000 KÄ (2 kroky pÅ™es 261!)', md:'261', d:'211', mdName:'PenÃ­ze na cestÄ›', dName:'Pokladna', amount:'10 000',
        why:'1. krok VPD: Z pokladny (211 D) jdou penÃ­ze na 261 (261 MD).'},
      {desc:'<strong>VBU â€“ vklad na bankovnÃ­ ÃºÄet</strong> 10 000 KÄ', md:'221', d:'261', mdName:'Banka', dName:'PenÃ­ze na cestÄ›', amount:'10 000',
        why:'2. krok: Z 261 (261 D) jdou penÃ­ze na ÃºÄet (221 MD).'},
      {desc:'Hotel dostal <strong>bankovnÃ­ ÃºvÄ›r</strong> 200 000 KÄ', md:'221', d:'461', mdName:'Banka', dName:'BankovnÃ­ ÃºvÄ›ry', amount:'200 000',
        why:'Na bankovnÃ­m ÃºÄtu pÅ™ibydou penÃ­ze (aktivnÃ­ â†’ MD) a vznikne dlouhodobÃ½ dluh (pasivnÃ­ â†’ D)'},
    ];
    let casesHtml = cases.map((c, i) => `
      <div style="background:var(--bg3);border-radius:var(--radius-sm);padding:16px;margin:12px 0">
        <p><strong>${i + 1}.</strong> ${c.desc}</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:12px 0">
          <div class="t-account" style="flex:1;min-width:180px;max-width:250px;margin:0">
            <div class="t-account-title">${c.md} â€“ ${c.mdName}</div>
            <div class="t-account-body">
              <div class="t-account-md"><div class="t-account-md-header">MD</div>
                <div class="t-entry"><span class="amount" style="color:var(--green)">${c.amount}</span></div>
              </div>
              <div class="t-account-d"><div class="t-account-d-header">D</div></div>
            </div>
          </div>
          <div class="t-account" style="flex:1;min-width:180px;max-width:250px;margin:0">
            <div class="t-account-title">${c.d} â€“ ${c.dName}</div>
            <div class="t-account-body">
              <div class="t-account-md"><div class="t-account-md-header">MD</div></div>
              <div class="t-account-d"><div class="t-account-d-header">D</div>
                <div class="t-entry"><span class="amount" style="color:var(--green)">${c.amount}</span></div>
              </div>
            </div>
          </div>
        </div>
        <p style="text-align:center;font-family:monospace;font-weight:700;font-size:1.05rem;color:var(--primary)">${c.md} / ${c.d} &nbsp; ... &nbsp; ${c.amount} KÄ</p>
        <details style="margin-top:6px"><summary style="cursor:pointer;color:var(--text2);font-size:.88rem">ProÄ? (klikni pro vysvÄ›tlenÃ­)</summary>
        <p style="font-size:.88rem;margin-top:6px;color:var(--text2)">${c.why}</p></details>
      </div>
    `).join('');

    return `<div class="lesson">
      <h2><span class="emoji">âœï¸</span> Lekce 5: ÃšÄtujeme! â€“ ZÃ¡kladnÃ­ ÃºÄetnÃ­ pÅ™Ã­pady</h2>

      <p>TeÄ pÅ™ichÃ¡zÃ­ praxe! PodÃ­vej se na <strong>10 nejÄastÄ›jÅ¡Ã­ch operacÃ­</strong> v hotelu a jak se zaÃºÄtujÃ­. KaÅ¾dÃ½ pÅ™Ã­pad je zapsÃ¡n jako <strong>MD / D</strong> (ÄÃ­slo ÃºÄtu na levÃ© stranÄ› / ÄÃ­slo ÃºÄtu na pravÃ© stranÄ›).</p>

      <div class="highlight">
        <strong>FormÃ¡t zÃ¡pisu:</strong> ÄÃ­slo_ÃºÄtu_MD / ÄÃ­slo_ÃºÄtu_D &nbsp;&nbsp; ÄÃ¡stka<br>
        NapÅ™Ã­klad: 211 / 602 ... 3 000 KÄ = â€na ÃºÄtu 211 na MD a na ÃºÄtu 602 na D zapÃ­Å¡eme 3 000 KÄ"
      </div>

      ${casesHtml}

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ CviÄenÃ­: ZaÃºÄtuj to!</div>
        <p>Vyber sprÃ¡vnou dvojici ÃºÄtÅ¯ (MD / D) pro kaÅ¾dou situaci:</p>
        ${makeQuiz([
          {q:'Hotel nakoupil ÄisticÃ­ prostÅ™edky za hotovÃ© za 1 200 KÄ. Jak zaÃºÄtujeme?',
           opts:['211 / 501','501 / 211','501 / 321','321 / 211'], correct:1,
           explanation:'SpotÅ™eba materiÃ¡lu (501) na MD = nÃ¡klad pÅ™ibÃ½vÃ¡. Z pokladny (211) ubÃ½vajÃ­ penÃ­ze na D.'},
          {q:'Firma zaplatila za konferenci v hotelu pÅ™evodem na ÃºÄet 25 000 KÄ:',
           opts:['602 / 221','221 / 602','211 / 602','602 / 211'], correct:1,
           explanation:'Na banku (221) pÅ™ibydou penÃ­ze (aktivnÃ­ â†’ MD). TrÅ¾ba za sluÅ¾by (602) na D = vÃ½nos pÅ™ibÃ½vÃ¡.'},
          {q:'PÅ™iÅ¡la faktura za opravu vÃ½tahu 15 000 KÄ (jeÅ¡tÄ› nezaplaceno):',
           opts:['321 / 511','511 / 321','511 / 221','221 / 511'], correct:1,
           explanation:'Opravy a udrÅ¾ovÃ¡nÃ­ (511) = nÃ¡klad na MD. DodavatelÃ© (321) = dluh na D.'},
          {q:'Hotel zaplatil z banky fakturu za potraviny 12 000 KÄ:',
           opts:['221 / 321','501 / 221','321 / 221','321 / 211'], correct:2,
           explanation:'Dluh dodavateli (321) se sniÅ¾uje â†’ MD. Z banky (221) odejdou penÃ­ze â†’ D.'},
          {q:'Host zaplatil hotovÄ› za minibar (zboÅ¾Ã­) 500 KÄ:',
           opts:['604 / 211','211 / 604','211 / 602','132 / 211'], correct:1,
           explanation:'Do pokladny (211) pÅ™ibydou penÃ­ze â†’ MD. TrÅ¾ba za zboÅ¾Ã­ (604) na D.'}
        ], 'quiz5', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== LEKCE 6: FINANÄŒNÃ ÃšÄŒTY (261, PPD, VPD, VBU) =====
{
  short: '261',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ’µ</span> Lekce 6: FinanÄnÃ­ ÃºÄty â€“ pokladna, banka, penÃ­ze na cestÄ›</h2>

      <p>PÅ™i pÅ™evodu penÄ›z <strong>mezi pokladnou a bankou</strong> se <strong>povinnÄ› ÃºÄtuje pÅ™es ÃºÄet 261 â€“ PenÃ­ze na cestÄ›</strong>. Nikdy ne pÅ™Ã­mo 211/221!</p>

      <h3>ÃšÄty</h3>
      <table class="acc-table">
        <tr><th>ÄŒÃ­slo</th><th>NÃ¡zev</th><th>PoznÃ¡mka</th></tr>
        <tr><td class="num">211</td><td>Pokladna</td><td>Hotovost v pokladnÄ›</td></tr>
        <tr><td class="num">221</td><td>BankovnÃ­ ÃºÄty</td><td>Pohyby na ÃºÄtu</td></tr>
        <tr><td class="num">261</td><td>PenÃ­ze na cestÄ›</td><td><strong>PÅ™echodnÃ½ ÃºÄet</strong> â€“ na konci roku nesmÃ­ mÃ­t zÅ¯statek!</td></tr>
      </table>

      <div class="warning">
        <strong>Pravidlo:</strong> PÅ™i pÅ™evodu hotovosti mezi ÃºÄty (pokladna â†” banka) se <strong>povinnÄ›</strong> ÃºÄtuje pÅ™es ÃºÄet 261. VÅ¾dy dva kroky!
      </div>

      <h3>A) VÃ½bÄ›r penÄ›z z banky do pokladny</h3>
      <p><strong>1. krok â€“ PPD</strong> (pÅ™Ã­jmovÃ½ pokladnÃ­ doklad): penÃ­ze opouÅ¡tÄ›jÃ­ banku â†’ jdou â€na cestu".<br>
      <strong>2. krok â€“ VBU</strong> (vÃ½pis bankovnÃ­ho ÃºÄtu / vnitÅ™nÃ­ bankovnÃ­ doklad): penÃ­ze z â€cesty" pÅ™ijdou do pokladny.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:12px 0">
        <div class="t-account" style="min-width:140px"><div class="t-account-title">221 D</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry"><span class="amount">60 000</span></div></div></div></div>
        <div class="t-account" style="min-width:140px"><div class="t-account-title">261 MD</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry"><span class="amount">60 000</span></div></div><div class="t-account-d"><div class="t-account-d-header">D</div></div></div></div>
        <div class="t-account" style="min-width:140px"><div class="t-account-title">261 D</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry"><span class="amount">60 000</span></div></div></div></div>
        <div class="t-account" style="min-width:140px"><div class="t-account-title">211 MD</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry"><span class="amount">60 000</span></div></div><div class="t-account-d"><div class="t-account-d-header">D</div></div></div></div>
      </div>
      <p style="text-align:center;font-weight:600;color:var(--primary)">1. PPD: 261/221 â€¦ 2. VBU: 211/261</p>

      <h3>B) Odvod penÄ›z z pokladny na ÃºÄet (do banky)</h3>
      <p><strong>1. krok â€“ VPD</strong> (vÃ½dajovÃ½ pokladnÃ­ doklad): penÃ­ze z pokladny jdou â€na cestu".<br>
      <strong>2. krok â€“ VBU</strong>: penÃ­ze z â€cesty" pÅ™ijdou na bankovnÃ­ ÃºÄet.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:12px 0">
        <div class="t-account" style="min-width:140px"><div class="t-account-title">211 D</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry"><span class="amount">1 000</span></div></div></div></div>
        <div class="t-account" style="min-width:140px"><div class="t-account-title">261 MD</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry"><span class="amount">1 000</span></div></div><div class="t-account-d"><div class="t-account-d-header">D</div></div></div></div>
        <div class="t-account" style="min-width:140px"><div class="t-account-title">261 D</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry"><span class="amount">1 000</span></div></div></div></div>
        <div class="t-account" style="min-width:140px"><div class="t-account-title">221 MD</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry"><span class="amount">1 000</span></div></div><div class="t-account-d"><div class="t-account-d-header">D</div></div></div></div>
      </div>
      <p style="text-align:center;font-weight:600;color:var(--primary)">1. VPD: 261/211 â€¦ 2. VBU: 221/261</p>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'PÅ™i vÃ½bÄ›ru 20 000 KÄ z banky do pokladny â€“ prvnÃ­ krok (PPD) se zaÃºÄtuje:',
           opts:['211/261','261/221','221/261','261/211'], correct:1, explanation:'Z banky (221 D) jdou penÃ­ze na 261 (261 MD).'},
          {q:'ÃšÄet 261 (PenÃ­ze na cestÄ›) na konci roku:',
           opts:['MÅ¯Å¾e mÃ­t libovolnÃ½ zÅ¯statek','NesmÃ­ vykazovat zÅ¯statek','MusÃ­ mÃ­t zÅ¯statek rovnÃ½ pokladnÄ›','Pouze u plÃ¡tcÅ¯ DPH'], correct:1, explanation:'261 je pÅ™echodnÃ½ ÃºÄet â€“ vÅ¡e musÃ­ bÃ½t pÅ™evedeno do 211 nebo 221.'},
          {q:'Odvod 5 000 KÄ z pokladny na ÃºÄet â€“ druhÃ½ krok (VBU):',
           opts:['261/211','221/261','211/261','261/221'], correct:1, explanation:'Z 261 (261 D) jdou penÃ­ze na ÃºÄet (221 MD).'}
        ], 'quiz6', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== LEKCE 7: INVENTARIZACE POKLADNY â€“ SCHODEK =====
{
  short: 'Schodek',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“‰</span> Lekce 7: Inventarizace pokladny â€“ schodek</h2>

      <p>PÅ™i <strong>inventarizaci pokladny</strong> zjistÃ­me, jestli skuteÄnÃ¡ hotovost odpovÃ­dÃ¡ zÃ¡pisÅ¯m. Pokud je v pokladnÄ› <strong>mÃ©nÄ›</strong> penÄ›z neÅ¾ v ÃºÄetnictvÃ­, jde o <strong>schodek</strong>.</p>

      <h3>Postup ÃºÄtovÃ¡nÃ­ schodku</h3>
      <ol>
        <li><strong>1. Schodek</strong> â€“ z pokladny â€ubude" penÄ›z (v realitÄ› chybÃ­) â†’ 211 D, 569 MD (Manka a Å¡kody â€“ nÃ¡klad).</li>
        <li><strong>2. PÅ™edpis schodku k ÃºhradÄ›</strong> â€“ zamÄ›stnanec mÃ¡ schodek zaplatit â†’ 668 MD (OstatnÃ­ operativnÃ­ nÃ¡klady / pÅ™edpis), 335 D (PohledÃ¡vky za zamÄ›stnancem).</li>
        <li><strong>3a. Ãšhrada schodku v hotovosti</strong> â€“ zamÄ›stnanec vrÃ¡tÃ­ penÃ­ze â†’ 211 MD, 335 D.<br>
        <strong>3b. Ãšhrada srÃ¡Å¾kou ze mzdy</strong> â€“ srazÃ­ se ze mzdy â†’ 331 MD (ZamÄ›stnanci), 335 D.</li>
      </ol>

      <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:12px 0;font-size:.9rem">
        <div class="t-account" style="min-width:130px"><div class="t-account-title">211 / 569</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry">schodek 750</div></div></div></div>
        <div class="t-account" style="min-width:130px"><div class="t-account-title">668 / 335</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry">pÅ™edpis 750</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry">750</div></div></div></div>
        <div class="t-account" style="min-width:130px"><div class="t-account-title">211 / 335</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry">Ãºhrada 250</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry">250</div></div></div></div>
        <div class="t-account" style="min-width:130px"><div class="t-account-title">331 / 335</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry">srÃ¡Å¾ka 300</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry">300</div></div></div></div>
      </div>

      <div class="tip"><strong>ÃšÄty:</strong> 569 Manka a Å¡kody (nÃ¡klad), 668 OstatnÃ­ (pÅ™edpis), 335 PohledÃ¡vky za zamÄ›stnanci, 331 ZamÄ›stnanci (zÃ¡vazek â€“ srÃ¡Å¾ka ze mzdy).</div>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'Schodek na pokladnÄ› 500 KÄ se nejdÅ™Ã­v zaÃºÄtuje:',
           opts:['569/211','211/569','335/668','211/335'], correct:1, explanation:'NÃ¡klad na manka (569 MD) a Ãºbytek v pokladnÄ› (211 D).'},
          {q:'PÅ™edpis schodku k ÃºhradÄ› zamÄ›stnanci znamenÃ¡ zÃ¡pis:',
           opts:['335/211','668/335','569/335','331/335'], correct:1, explanation:'NÃ¡klad pÅ™edpisu (668 MD) a pohledÃ¡vka za zamÄ›stnancem (335 D).'},
          {q:'Ãšhrada schodku srÃ¡Å¾kou ze mzdy:',
           opts:['335/331','331/335','211/331','569/331'], correct:1, explanation:'SnÃ­Å¾Ã­ se zÃ¡vazek ke zamÄ›stnanci (331 MD) a pohledÃ¡vka za nÃ­m (335 D).'}
        ], 'quiz7', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== LEKCE 8: ZÃLOHY ZAMÄšSTNANCÅ®M =====
{
  short: 'ZÃ¡lohy',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ§¾</span> Lekce 8: ZÃ¡lohy zamÄ›stnancÅ¯m (ÃºÄet 335)</h2>

      <p>Firma vyplÃ¡cÃ­ <strong>zÃ¡lohy</strong> (na sluÅ¾ebnÃ­ cestu, drobnÃ½ nÃ¡kup). PenÃ­ze jdou z pokladny na ÃºÄet <strong>335 â€“ PohledÃ¡vky za zamÄ›stnanci</strong>. Po vyÃºÄtovÃ¡nÃ­ se zÃ¡loha â€rozpadne" na nÃ¡klad a pÅ™Ã­padnÄ› vrÃ¡cenÃ­ nebo doplatek.</p>

      <h3>A) ZÃ¡loha je vyÅ¡Å¡Ã­ neÅ¾ doklad (pÅ™eplatek)</h3>
      <p>ZamÄ›stnanec dostal vÃ­c neÅ¾ utratil â†’ vracÃ­ pÅ™eplatek do pokladny.</p>
      <ul>
        <li><strong>1. VPD â€“ zÃ¡loha</strong> napÅ™. 1 000 KÄ: 335 MD, 211 D (z pokladny jde zÃ¡loha).</li>
        <li><strong>2. Doklad</strong> (cestovnÃ©, nÃ¡kup) napÅ™. 621 KÄ: 504 MD (nebo 512 cestovnÃ©), 335 D (zÃ¡loha se sniÅ¾uje o utracenou ÄÃ¡st).</li>
        <li><strong>3. VrÃ¡cenÃ­ pÅ™eplatku</strong> 379 KÄ: 211 MD, 335 D.</li>
      </ul>

      <h3>B) ZÃ¡loha je niÅ¾Å¡Ã­ neÅ¾ doklad (doplatek)</h3>
      <p>ZamÄ›stnanec utratil vÃ­c neÅ¾ dostal â†’ firma doplatÃ­.</p>
      <ul>
        <li><strong>1. VPD â€“ zÃ¡loha</strong> 500 KÄ: 335 MD, 211 D.</li>
        <li><strong>2. Doklad</strong> 921 KÄ: 504 MD (celÃ½ch 921), 335 D (500 â€“ zÃ¡loha), 211 D (421 â€“ doplatek z pokladny). Nebo: 504/335 500 a 504/211 421.</li>
      </ul>

      <div class="highlight">ÃšÄty: <strong>335</strong> PohledÃ¡vky za zamÄ›stnanci, <strong>512</strong> CestovnÃ©, <strong>504</strong> SpotÅ™eba sluÅ¾eb (drobnÃ½ nÃ¡kup), <strong>211</strong> Pokladna.</div>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'VPD â€“ zÃ¡loha na sluÅ¾ebnÃ­ cestu 1 000 KÄ. ZaÃºÄtovÃ¡nÃ­:',
           opts:['211/335','335/211','504/335','335/504'], correct:1, explanation:'PohledÃ¡vka za zamÄ›stnancem (335 MD) roste, pokladna (211 D) ubÃ½vÃ¡.'},
          {q:'VyÃºÄtovÃ¡nÃ­ zÃ¡lohy: cestovnÃ© 982 KÄ (zÃ¡loha byla 1 000). ZamÄ›stnanec vracÃ­ 18 KÄ. DruhÃ½ zÃ¡pis (vrÃ¡cenÃ­):',
           opts:['335/211','211/335','504/211','211/504'], correct:1, explanation:'Do pokladny (211 MD) pÅ™ijdou penÃ­ze, pohledÃ¡vka (335 D) se snÃ­Å¾Ã­.'},
          {q:'KterÃ½ ÃºÄet je â€pohledÃ¡vky za zamÄ›stnanciâ€œ?',
           opts:['331','334','335','512'], correct:2, explanation:'335 = pohledÃ¡vky za zamÄ›stnanci (zÃ¡lohy, pÅ™edpisy k ÃºhradÄ›).'}
        ], 'quiz8', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== LEKCE 9: CENINY A STRAVENKY =====
{
  short: 'Ceniny',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ«</span> Lekce 9: Ceniny a stravenky</h2>

      <p><strong>Ceniny</strong> = poÅ¡tovnÃ­ znÃ¡mky, jÃ­zdenky, letenky, stravenky, kolky. ÃšÄtujÃ­ se na ÃºÄet <strong>213 â€“ Ceniny</strong> (nebo 243 podle osnovy). PÅ™i <strong>spotÅ™ebÄ›</strong> jdou do nÃ¡kladÅ¯ (518 OstatnÃ­ sluÅ¾by, 538 kolky).</p>

      <h3>NÃ¡kup a spotÅ™eba cenin</h3>
      <ul>
        <li><strong>NÃ¡kup cenin</strong> (faktura): 213 MD, 321 D.</li>
        <li><strong>SpotÅ™eba</strong> (znÃ¡mky, kolky): 518 MD (nebo 538), 213 D.</li>
      </ul>

      <h3>Stravenky</h3>
      <p>VÃ½daje na stravenky jsou <strong>daÅˆovÄ› uznatelnÃ½m nÃ¡kladem</strong>. Existuje <strong>limit pÅ™Ã­spÄ›vku zamÄ›stnavatele</strong> (napÅ™. 129 KÄ) â€“ pÅ™i pÅ™ekroÄenÃ­ se z rozdÃ­lu odvÃ¡dÃ­ soc. a zdrav. pojiÅ¡tÄ›nÃ­ a zamÄ›stnanci se zvyÅ¡uje zÃ¡klad danÄ›.</p>
      <p><strong>VÃ½dej stravenek:</strong></p>
      <ul>
        <li>PodÃ­l hrazenÃ½ zamÄ›stnavatelem â†’ nÃ¡klad (524 nebo 518).</li>
        <li>PÅ™edpis k ÃºhradÄ› zamÄ›stnanci â†’ 335 MD (pohledÃ¡vka), 213 D (ceniny ubydou). Ãšhrada srÃ¡Å¾kou ze mzdy: 331 MD, 335 D.</li>
      </ul>

      <div class="tip">ÃšÄty: <strong>213</strong> Ceniny, <strong>518</strong> OstatnÃ­ sluÅ¾by, <strong>538</strong> OstatnÃ­ danÄ› a poplatky, <strong>524</strong> (sociÃ¡lnÃ­), <strong>335</strong> PohledÃ¡vky za zam., <strong>331</strong> ZamÄ›stnanci.</div>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'DoÅ¡la faktura za stravenky 3 000 KÄ. ZaÃºÄtovÃ¡nÃ­:',
           opts:['213/321','321/213','518/321','213/518'], correct:0, explanation:'Ceniny (213 MD) pÅ™ibydou, zÃ¡vazek dodavateli (321 D) roste.'},
          {q:'SpotÅ™eba poÅ¡tovnÃ­ch znÃ¡mek 100 KÄ:',
           opts:['518/213','213/518','321/213','518/321'], correct:0, explanation:'NÃ¡klad na sluÅ¾by (518 MD), ceniny (213 D) ubydou.'},
          {q:'Limit pÅ™Ã­spÄ›vku na stravenku (pÅ™i pÅ™ekroÄenÃ­ dalÅ¡Ã­ odvody):',
           opts:['cca 55 KÄ','cca 129 KÄ','cca 200 KÄ','nenÃ­ limit'], correct:1, explanation:'Limit se kaÅ¾dÃ½ rok mÅ¯Å¾e upravit (aktuÃ¡lnÄ› kolem 129 KÄ).'}
        ], 'quiz9', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== LEKCE 10: ZÃSOBY ZPÅ®SOB A (111, 112, 501) =====
{
  short: 'ZÃ¡soby',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“¦</span> Lekce 10: ÃšÄtovÃ¡nÃ­ zÃ¡sob â€“ zpÅ¯sob A (materiÃ¡l)</h2>

      <p><strong>ZpÅ¯sob A:</strong> NakupovanÃ© zÃ¡soby (materiÃ¡l) se v prÅ¯bÄ›hu roku ÃºÄtujÃ­ na <strong>rozvahovÃ½ ÃºÄet zÃ¡sob</strong>. Do <strong>nÃ¡kladÅ¯</strong> se dostanou aÅ¾ pÅ™i <strong>spotÅ™ebÄ›</strong> (vÃ½dejka).</p>

      <h3>ÃšÄty</h3>
      <ul>
        <li><strong>111 â€“ PoÅ™Ã­zenÃ­ materiÃ¡lu</strong> â€“ pÅ™echodnÃ½ ÃºÄet (na konci roku zÅ¯statek 0). SlouÅ¾Ã­ ke zjiÅ¡tÄ›nÃ­ poÅ™izovacÃ­ ceny (cena + doprava, pojiÅ¡tÄ›nÃ­, provizeâ€¦).</li>
        <li><strong>112 â€“ MateriÃ¡l na skladÄ›</strong> â€“ zÃ¡soby na skladÄ› (rozvaha).</li>
        <li><strong>501 â€“ SpotÅ™eba materiÃ¡lu</strong> â€“ nÃ¡klad pÅ™i spotÅ™ebÄ› (vÃ½dejka).</li>
      </ul>

      <h3>Tok: faktura â†’ poÅ™Ã­zenÃ­ â†’ pÅ™Ã­jemka â†’ vÃ½dejka</h3>
      <ol>
        <li><strong>DoÅ¡la faktura</strong> za materiÃ¡l (u plÃ¡tce DPH: cena bez DPH na 111, DPH na 343): 111 MD, 343 MD, 321 D.</li>
        <li><strong>PÅ™Ã­jemka</strong> (pÅ™Ã­jem na sklad): 112 MD, 111 D (z 111 pÅ™evedeme na sklad).</li>
        <li><strong>VÃ½dejka</strong> (spotÅ™eba): 501 MD, 112 D.</li>
      </ol>

      <div class="highlight">Pro <strong>neplÃ¡tce DPH</strong> se ÃºÄtuje cena celkem (vÄetnÄ› DPH) na 111. Pro <strong>plÃ¡tce</strong> cena bez DPH + DPH zvlÃ¡Å¡Å¥ na 343.</div>

      <p><strong>PÅ™Ã­klad:</strong> Faktura 112 100 KÄ (materiÃ¡l 100 000 + DPH 12 100). MD 111 100 000, MD 343 12 100, D 321 112 100.</p>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'ÃšÄet 111 (PoÅ™Ã­zenÃ­ materiÃ¡lu) na konci roku:',
           opts:['MusÃ­ mÃ­t zÅ¯statek','NesmÃ­ vykazovat zÅ¯statek','Pouze u plÃ¡tcÅ¯ DPH','Pouze u zÃ¡sob'], correct:1, explanation:'111 je pÅ™echodnÃ½ ÃºÄet pro zjiÅ¡tÄ›nÃ­ poÅ™izovacÃ­ ceny.'},
          {q:'PÅ™i vÃ½dejce materiÃ¡lu (spotÅ™eba) zaÃºÄtujeme:',
           opts:['501/112','112/501','111/501','501/321'], correct:0, explanation:'NÃ¡klad spotÅ™eby (501 MD), zÃ¡soby (112 D) ubydou.'},
          {q:'PÅ™Ã­jemka materiÃ¡lu na sklad (z 111):',
           opts:['112/111','111/112','321/112','112/321'], correct:0, explanation:'MateriÃ¡l na skladÄ› (112 MD) pÅ™ibyde, 111 (D) se vyprÃ¡zdnÃ­.'}
        ], 'quiz10', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== LEKCE 11: PRÃCE V HODINÄš â€“ PÅ˜ÃKLAD =====
{
  short: 'PÅ™Ã­klad',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">âœï¸</span> Lekce 11: PrÃ¡ce v hodinÄ› â€“ celÃ½ pÅ™Ã­klad</h2>

      <p>Å est operacÃ­ za sebou â€“ pÅ™esnÄ› jak mÅ¯Å¾e pÅ™ijÃ­t u zkouÅ¡ky. Projdi si zÃ¡pisy a ovÄ›Å™, Å¾e kaÅ¾dÃ¡ ÄÃ¡stka jde na dvÄ› strany.</p>

      <div class="exercise">
        <div class="exercise-title">ZadÃ¡nÃ­</div>
        <ol style="margin:12px 0 20px 20px;font-size:.95rem">
          <li>Schodek na pokladnÄ› 750 KÄ</li>
          <li>PÅ™edpis schodku k ÃºhradÄ› zamÄ›stnanci</li>
          <li>VPD â€“ odvod do banky 1 000 KÄ</li>
          <li>Ãšhrada schodku srÃ¡Å¾kou ze mzdy 300 KÄ</li>
          <li>PPD â€“ Ãºhrada schodku 250 KÄ</li>
          <li>VBU â€“ odvod do banky 1 000 KÄ</li>
        </ol>
      </div>

      <h3>Å˜eÅ¡enÃ­ â€“ zÃ¡pisy</h3>
      <table class="acc-table">
        <tr><th>Operace</th><th>MD</th><th>D</th><th>ÄŒÃ¡stka</th></tr>
        <tr><td>1. Schodek</td><td>569 Manka a Å¡kody</td><td>211 Pokladna</td><td>750</td></tr>
        <tr><td>2. PÅ™edpis schodku</td><td>668 OstatnÃ­</td><td>335 PohledÃ¡vky za zam.</td><td>750</td></tr>
        <tr><td>3. VPD odvod</td><td>261 PenÃ­ze na cestÄ›</td><td>211 Pokladna</td><td>1 000</td></tr>
        <tr><td>4. Ãšhrada srÃ¡Å¾kou</td><td>331 ZamÄ›stnanci</td><td>335 PohledÃ¡vky za zam.</td><td>300</td></tr>
        <tr><td>5. PPD Ãºhrada schodku</td><td>211 Pokladna</td><td>335 PohledÃ¡vky za zam.</td><td>250</td></tr>
        <tr><td>6. VBU odvod</td><td>221 Banka</td><td>261 PenÃ­ze na cestÄ›</td><td>1 000</td></tr>
      </table>

      <div class="tip">
        <strong>Kontrola:</strong> Ãšhrada schodku 750 = 300 (srÃ¡Å¾ka) + 250 (hotovost) + 200 (zÅ¯stÃ¡vÃ¡ jako pohledÃ¡vka 335, nebo dalÅ¡Ã­ Ãºhrada). PÅ™evod 1 000 KÄ: nejdÅ™Ã­v 211â†’261 (VPD), pak 261â†’221 (VBU).
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== LEKCE 12: ÃšÄŒETNÃ DOKLADY =====
{
  short: 'Doklady',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“„</span> Lekce 6: ÃšÄetnÃ­ doklady</h2>

      <p>Aby bylo ÃºÄetnictvÃ­ prÅ¯kaznÃ©, <strong>kaÅ¾dÃ¡ operace musÃ­ mÃ­t doklad</strong> â€“ papÃ­r (nebo elektronickÃ½ dokument), kterÃ½ dokazuje, Å¾e se operace skuteÄnÄ› stala.</p>

      <h3>Typy ÃºÄetnÃ­ch dokladÅ¯</h3>
      <table class="acc-table">
        <tr><th>Doklad</th><th>Kdy se pouÅ¾Ã­vÃ¡</th><th>PÅ™Ã­klad z hotelu</th></tr>
        <tr><td><strong>Faktura pÅ™ijatÃ¡ (FP)</strong></td><td>KdyÅ¾ hotel NAKUPUJE na fakturu</td><td>Faktura od dodavatele potravin</td></tr>
        <tr><td><strong>Faktura vydanÃ¡ (FV)</strong></td><td>KdyÅ¾ hotel PRODÃVÃ na fakturu</td><td>Faktura firmÄ› za konferenci</td></tr>
        <tr><td><strong>PÅ™Ã­jmovÃ½ pokladnÃ­ doklad (PPD)</strong></td><td>PÅ™Ã­jem hotovosti do pokladny</td><td>Host platÃ­ za pokoj hotovÄ›</td></tr>
        <tr><td><strong>VÃ½dajovÃ½ pokladnÃ­ doklad (VPD)</strong></td><td>VÃ½dej hotovosti z pokladny</td><td>NÃ¡kup drobnÃ©ho materiÃ¡lu</td></tr>
        <tr><td><strong>VÃ½pis z bankovnÃ­ho ÃºÄtu (VBÃš)</strong></td><td>Pohyby na bankovnÃ­m ÃºÄtu</td><td>Platba kartou, pÅ™Ã­chozÃ­ platba</td></tr>
        <tr><td><strong>InternÃ­ doklad (ID)</strong></td><td>VnitÅ™nÃ­ operace firmy</td><td>PÅ™edpis mezd, odpisy majetku</td></tr>
      </table>

      <h3>Co musÃ­ kaÅ¾dÃ½ doklad obsahovat?</h3>
      <div class="highlight">
        <strong>PovinnÃ© nÃ¡leÅ¾itosti ÃºÄetnÃ­ho dokladu:</strong>
        <ol>
          <li><strong>OznaÄenÃ­ dokladu</strong> (ÄÃ­slo, typ) â€“ napÅ™. FP-2026/001</li>
          <li><strong>Popis operace</strong> â€“ co se stalo</li>
          <li><strong>PenÄ›Å¾nÃ­ ÄÃ¡stka</strong> â€“ kolik</li>
          <li><strong>Datum vystavenÃ­</strong> dokladu</li>
          <li><strong>Datum uskuteÄnÄ›nÃ­</strong> operace</li>
          <li><strong>Podpis / identifikace</strong> odpovÄ›dnÃ© osoby</li>
        </ol>
      </div>

      <div class="tip">
        <strong>Zkratky na zapamatovÃ¡nÃ­:</strong> FP = Faktura PÅ™ijatÃ¡, FV = Faktura VydanÃ¡, PPD = PÅ™Ã­jmovÃ½ PokladnÃ­ Doklad, VPD = VÃ½dajovÃ½ PokladnÃ­ Doklad, VBÃš = VÃ½pis z BankovnÃ­ho ÃšÄtu, ID = InternÃ­ Doklad
      </div>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ CviÄenÃ­: Najdi chybu v dokladu</div>
        <p>KaÅ¾dÃ½ z tÄ›chto dokladÅ¯ mÃ¡ chybu. Klikni na Å™Ã¡dek, kde je problÃ©m:</p>

        <div class="doc-card" id="doc1">
          <span class="doc-type">FAKTURA PÅ˜IJATÃ</span>
          <div class="doc-line" onclick="findDocError(this,1)">ÄŒÃ­slo dokladu: FP-2026/015</div>
          <div class="doc-line" onclick="findDocError(this,1)">Dodavatel: Makro Cash & Carry</div>
          <div class="doc-line" onclick="findDocError(this,1)">Popis: NÃ¡kup potravin pro kuchyni</div>
          <div class="doc-line" data-is-error="1" onclick="findDocError(this,1)">ÄŒÃ¡stka: (neuvedena)</div>
          <div class="doc-line" onclick="findDocError(this,1)">Datum vystavenÃ­: 15. 1. 2026</div>
          <div class="doc-line" onclick="findDocError(this,1)">Podpis: Jan NovÃ¡k</div>
        </div>
        <div class="feedback" id="doc1fb"></div>

        <div class="doc-card" id="doc2">
          <span class="doc-type">PÅ˜ÃJMOVÃ POKLADNÃ DOKLAD</span>
          <div class="doc-line" data-is-error="1" onclick="findDocError(this,2)">ÄŒÃ­slo dokladu: (chybÃ­ ÄÃ­slo)</div>
          <div class="doc-line" onclick="findDocError(this,2)">PÅ™ijato od: Host â€“ Karel DvoÅ™Ã¡k</div>
          <div class="doc-line" onclick="findDocError(this,2)">Za: UbytovÃ¡nÃ­ 2 noci</div>
          <div class="doc-line" onclick="findDocError(this,2)">ÄŒÃ¡stka: 4 200 KÄ</div>
          <div class="doc-line" onclick="findDocError(this,2)">Datum: 20. 1. 2026</div>
          <div class="doc-line" onclick="findDocError(this,2)">Podpis: Marie SvobodovÃ¡</div>
        </div>
        <div class="feedback" id="doc2fb"></div>

        <div class="doc-card" id="doc3">
          <span class="doc-type">FAKTURA VYDANÃ</span>
          <div class="doc-line" onclick="findDocError(this,3)">ÄŒÃ­slo dokladu: FV-2026/042</div>
          <div class="doc-line" onclick="findDocError(this,3)">OdbÄ›ratel: ABC s.r.o.</div>
          <div class="doc-line" onclick="findDocError(this,3)">Popis: PronÃ¡jem konferenÄnÃ­ho sÃ¡lu</div>
          <div class="doc-line" onclick="findDocError(this,3)">ÄŒÃ¡stka: 15 000 KÄ</div>
          <div class="doc-line" onclick="findDocError(this,3)">Datum vystavenÃ­: 25. 1. 2026</div>
          <div class="doc-line" data-is-error="1" onclick="findDocError(this,3)">Podpis: (chybÃ­)</div>
        </div>
        <div class="feedback" id="doc3fb"></div>

        <div id="docScore" style="display:none" class="score-box">
          <div class="score-big" id="docScoreNum"></div>
          <div class="score-label">chyb nalezeno ze 3</div>
          <div class="btn-group"><button class="btn btn-primary" onclick="nextLesson()">PokraÄovat â†’</button></div>
        </div>
      </div>
      ${makeFooter(idx)}
    </div>`;
  },
  afterRender() {
    window.docErrors = {found: 0, total: 3};
  }
},

// ===== LEKCE 7: DPH =====
{
  short: 'DPH',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ’°</span> Lekce 7: DPH pro zaÄÃ¡teÄnÃ­ky</h2>

      <h3>Co je DPH?</h3>
      <p><strong>DPH = DaÅˆ z pÅ™idanÃ© hodnoty</strong> â€“ daÅˆ, kterou platÃ­ koneÄnÃ½ spotÅ™ebitel (zÃ¡kaznÃ­k). Firma ji pouze â€vybÃ­rÃ¡" pro stÃ¡t.</p>

      <div class="analogy">
        <div class="analogy-title">ğŸ¨ PÅ™Ã­klad z hotelu</div>
        <p>KdyÅ¾ host zaplatÃ­ za pokoj <strong>3 360 KÄ</strong>, tak z toho:</p>
        <ul>
          <li><strong>3 000 KÄ</strong> = cena za ubytovÃ¡nÃ­ (zÃ¡klad danÄ›) â†’ jde hotelu</li>
          <li><strong>360 KÄ</strong> = DPH 12 % â†’ hotel to poÅ¡le stÃ¡tu</li>
        </ul>
        <p>Hotel je jen â€prÅ¯tokovÃ½ ohÅ™Ã­vaÄ" pro DPH â€“ vybere od hosta a odvede stÃ¡tu.</p>
      </div>

      <h3>Sazby DPH (od roku 2024)</h3>
      <table class="acc-table">
        <tr><th>Sazba</th><th>Procento</th><th>Co sem patÅ™Ã­</th></tr>
        <tr><td><strong>ZÃ¡kladnÃ­</strong></td><td style="font-weight:700;font-size:1.1rem">21 %</td><td>VÄ›tÅ¡ina zboÅ¾Ã­ a sluÅ¾eb, alkohol, wellness</td></tr>
        <tr><td><strong>SnÃ­Å¾enÃ¡</strong></td><td style="font-weight:700;font-size:1.1rem">12 %</td><td>UbytovÃ¡nÃ­, stravovÃ¡nÃ­, potraviny, knihy</td></tr>
      </table>

      <h3>DPH na vstupu vs. na vÃ½stupu</h3>
      <div style="display:flex;gap:16px;flex-wrap:wrap;margin:16px 0">
        <div style="flex:1;min-width:200px;background:var(--blue-bg);padding:16px;border-radius:var(--radius-sm);border:2px solid var(--blue)">
          <strong style="color:var(--blue)">DPH na VSTUPU</strong><br>
          = DPH, kterÃ© hotel ZAPLATÃ pÅ™i nÃ¡kupu<br>
          <strong>ÃšÄtujeme: 343 na MD</strong><br>
          <small>Hotel mÃ¡ nÃ¡rok na odpoÄet (stÃ¡t vrÃ¡tÃ­)</small>
        </div>
        <div style="flex:1;min-width:200px;background:var(--green-bg);padding:16px;border-radius:var(--radius-sm);border:2px solid var(--green)">
          <strong style="color:var(--green)">DPH na VÃSTUPU</strong><br>
          = DPH, kterÃ© hotel VYBERE pÅ™i prodeji<br>
          <strong>ÃšÄtujeme: 343 na D</strong><br>
          <small>Hotel to musÃ­ odvÃ©st stÃ¡tu</small>
        </div>
      </div>

      <div class="highlight">
        <strong>DaÅˆovÃ¡ povinnost = DPH na vÃ½stupu âˆ’ DPH na vstupu</strong><br>
        Pokud vÃ½stup > vstup â†’ hotel platÃ­ stÃ¡tu<br>
        Pokud vstup > vÃ½stup â†’ stÃ¡t vracÃ­ hotelu (nadmÄ›rnÃ½ odpoÄet)
      </div>

      <h3>PÅ™Ã­klad ÃºÄtovÃ¡nÃ­ s DPH</h3>
      <p><strong>PÅ™ijatÃ¡ faktura za potraviny: zÃ¡klad 10 000 KÄ + DPH 12 % = 1 200 KÄ, celkem 11 200 KÄ</strong></p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center">
        <div class="t-account" style="flex:1;min-width:160px;max-width:220px;margin:4px">
          <div class="t-account-title">501 â€“ SpotÅ™. mat.</div>
          <div class="t-account-body">
            <div class="t-account-md"><div class="t-account-md-header">MD</div>
              <div class="t-entry"><span class="amount" style="color:var(--red)">10 000</span></div>
            </div>
            <div class="t-account-d"><div class="t-account-d-header">D</div></div>
          </div>
        </div>
        <div class="t-account" style="flex:1;min-width:160px;max-width:220px;margin:4px">
          <div class="t-account-title">343 â€“ DPH</div>
          <div class="t-account-body">
            <div class="t-account-md"><div class="t-account-md-header">MD</div>
              <div class="t-entry"><span class="amount" style="color:var(--blue)">1 200</span></div>
            </div>
            <div class="t-account-d"><div class="t-account-d-header">D</div></div>
          </div>
        </div>
        <div class="t-account" style="flex:1;min-width:160px;max-width:220px;margin:4px">
          <div class="t-account-title">321 â€“ DodavatelÃ©</div>
          <div class="t-account-body">
            <div class="t-account-md"><div class="t-account-md-header">MD</div></div>
            <div class="t-account-d"><div class="t-account-d-header">D</div>
              <div class="t-entry"><span class="amount" style="color:var(--green)">11 200</span></div>
            </div>
          </div>
        </div>
      </div>
      <p style="text-align:center;font-family:monospace;font-weight:700;color:var(--primary)">501/321 = 10 000 &nbsp;|&nbsp; 343/321 = 1 200</p>
      <div class="tip">CelkovÄ›: MD = 10 000 + 1 200 = 11 200 a D = 11 200. <strong>RovnÃ¡ se!</strong></div>

      <div class="exercise">
        <div class="exercise-title">ğŸ¯ CviÄenÃ­: SpoÄÃ­tej DPH</div>
        <div id="dphExercise"></div>
      </div>
      ${makeFooter(idx)}
    </div>`;
  },
  afterRender(idx) {
    const exercises = [
      {q:'UbytovÃ¡nÃ­ hosta: zÃ¡klad 5 000 KÄ, sazba DPH 12 %. Kolik je DPH a celkovÃ¡ cena?', dph:600, total:5600},
      {q:'NÃ¡kup alkoholu do baru: zÃ¡klad 8 000 KÄ, sazba DPH 21 %. Kolik je DPH?', dph:1680, total:9680},
      {q:'Faktura za Ãºklid (sluÅ¾ba): celkovÃ¡ cena 12 100 KÄ vÄetnÄ› DPH 21 %. Kolik je zÃ¡klad a kolik DPH?', dph:2100, total:12100, zaklad:10000},
    ];
    const container = document.getElementById('dphExercise');
    container.innerHTML = exercises.map((ex, i) => `
      <div style="background:var(--bg2);padding:14px;border-radius:var(--radius-sm);margin:10px 0">
        <p style="font-weight:600">${i + 1}. ${ex.q}</p>
        <div style="display:flex;gap:10px;align-items:end;flex-wrap:wrap;margin-top:8px">
          ${ex.zaklad ? `<div><label style="font-size:.85rem;font-weight:600">ZÃ¡klad (KÄ):</label><input type="number" id="dph_z_${i}" style="width:120px;padding:8px;border:2px solid var(--bg3);border-radius:var(--radius-xs);font-size:1rem;background:var(--bg2);color:var(--text)"></div>` : ''}
          <div><label style="font-size:.85rem;font-weight:600">DPH (KÄ):</label><input type="number" id="dph_d_${i}" style="width:120px;padding:8px;border:2px solid var(--bg3);border-radius:var(--radius-xs);font-size:1rem;background:var(--bg2);color:var(--text)"></div>
          ${!ex.zaklad ? `<div><label style="font-size:.85rem;font-weight:600">Celkem (KÄ):</label><input type="number" id="dph_t_${i}" style="width:120px;padding:8px;border:2px solid var(--bg3);border-radius:var(--radius-xs);font-size:1rem;background:var(--bg2);color:var(--text)"></div>` : ''}
          <button class="btn btn-accent" onclick="checkDph(${i},${ex.dph},${ex.total},${ex.zaklad || 0},${idx})">OvÄ›Å™it</button>
        </div>
        <div class="feedback" id="dph_fb_${i}"></div>
      </div>
    `).join('');
    window.dphSolved = 0;
    window.dphTotal = exercises.length;
  }
},

// ===== LEKCE 8: ZÃVÄšREÄŒNÃ TEST =====
{
  short: 'Test',
  render(idx) {
    const questions = [
      {q:'ProÄ se ÃºÄetnictvÃ­ nazÃ½vÃ¡ â€podvojnÃ©"?',
       opts:['DÄ›lÃ¡ se za 2 ÃºÄetnÃ­ obdobÃ­','KaÅ¾dÃ¡ operace se zapisuje na 2 ÃºÄty','ExistujÃ­ 2 druhy ÃºÄtÅ¯','PouÅ¾Ã­vajÃ­ se 2 mÄ›ny'],correct:1},
      {q:'Co jsou AKTIVA?',
       opts:['Zdroje financovÃ¡nÃ­','Majetek firmy','Dluhy firmy','VÃ½nosy firmy'],correct:1},
      {q:'Co jsou PASIVA?',
       opts:['Majetek firmy','PenÃ­ze v pokladnÄ›','Zdroje financovÃ¡nÃ­ (odkud firma vzala penÃ­ze na majetek)','NÃ¡klady firmy'],correct:2},
      {q:'BilanÄnÃ­ rovnice znÃ­:',
       opts:['Aktiva + Pasiva = 0','Aktiva = NÃ¡klady','Aktiva = Pasiva','VÃ½nosy = NÃ¡klady'],correct:2},
      {q:'Na kterou stranu T-ÃºÄtu se zapisuje PÅ˜ÃRÅ®STEK na AKTIVNÃM ÃºÄtu?',
       opts:['Na stranu D (pravÃ¡)','Na stranu MD (levÃ¡)','Na obÄ› strany','ZÃ¡leÅ¾Ã­ na ÄÃ¡stce'],correct:1},
      {q:'Na kterou stranu T-ÃºÄtu se zapisuje PÅ˜ÃRÅ®STEK na PASIVNÃM ÃºÄtu?',
       opts:['Na stranu MD (levÃ¡)','Na stranu D (pravÃ¡)','Nikam','Na obÄ› strany'],correct:1},
      {q:'ÃšÄet 211 je:',
       opts:['Banka','DodavatelÃ©','Pokladna','OdbÄ›ratelÃ©'],correct:2},
      {q:'ÃšÄet 321 je:',
       opts:['OdbÄ›ratelÃ©','ZamÄ›stnanci','Pokladna','DodavatelÃ©'],correct:3},
      {q:'ÃšÄet 602 je:',
       opts:['SpotÅ™eba materiÃ¡lu','MzdovÃ© nÃ¡klady','TrÅ¾by za sluÅ¾by','TrÅ¾by za zboÅ¾Ã­'],correct:2},
      {q:'ÃšÄet 501 je:',
       opts:['SpotÅ™eba materiÃ¡lu','SpotÅ™eba energie','MzdovÃ© nÃ¡klady','Pokladna'],correct:0},
      {q:'Host zaplatil hotovÄ› za ubytovÃ¡nÃ­ 2 500 KÄ. Jak zaÃºÄtujeme?',
       opts:['602 / 211','211 / 321','211 / 602','221 / 602'],correct:2},
      {q:'PÅ™ijatÃ¡ faktura za elektÅ™inu 6 000 KÄ:',
       opts:['321 / 502','502 / 321','502 / 211','211 / 502'],correct:1},
      {q:'VÃ½plata mezd zamÄ›stnancÅ¯m z banky 40 000 KÄ:',
       opts:['521 / 331','331 / 221','221 / 331','521 / 221'],correct:1},
      {q:'KterÃ© tvrzenÃ­ o DPH je PRAVDIVÃ‰?',
       opts:['DPH platÃ­ vÅ¾dy firma','DPH na vstupu se ÃºÄtuje na 343 D','DPH na vÃ½stupu se ÃºÄtuje na 343 D','DPH se neÃºÄtuje na Å¾Ã¡dnÃ½ ÃºÄet'],correct:2},
      {q:'ZÃ¡kladnÃ­ sazba DPH v ÄŒR je:',
       opts:['12 %','15 %','19 %','21 %'],correct:3},
      {q:'UbytovacÃ­ sluÅ¾by majÃ­ sazbu DPH:',
       opts:['21 %','15 %','12 %','0 %'],correct:2},
      {q:'PÅ™Ã­jmovÃ½ pokladnÃ­ doklad (PPD) se vystavuje, kdyÅ¾:',
       opts:['Firma platÃ­ dodavateli','Do pokladny pÅ™ijmou penÃ­ze','Z banky odejdou penÃ­ze','PÅ™ijde faktura'],correct:1},
      {q:'KterÃ© z tÄ›chto NENÃ povinnou nÃ¡leÅ¾itostÃ­ ÃºÄetnÃ­ho dokladu?',
       opts:['Datum vystavenÃ­','PenÄ›Å¾nÃ­ ÄÃ¡stka','RazÃ­tko firmy','OznaÄenÃ­ dokladu'],correct:2},
      {q:'PÅ™edpis hrubÃ½ch mezd zamÄ›stnancÅ¯m 30 000 KÄ se zaÃºÄtuje:',
       opts:['331 / 521','521 / 331','521 / 221','221 / 331'],correct:1},
      {q:'ÃšÄet 221 (Banka) je:',
       opts:['PasivnÃ­','NÃ¡kladovÃ½','VÃ½nosovÃ½','AktivnÃ­'],correct:3},
    ];

    // ZamÃ­chÃ¡me otÃ¡zky
    const shuffled = questions.map((q, i) => ({...q, origIdx: i})).sort(() => Math.random() - 0.5);

    let html = `<div class="lesson">
      <h2><span class="emoji">ğŸ“</span> ZÃ¡vÄ›reÄnÃ½ test â€“ simulace zkouÅ¡ky</h2>
      <div class="warning">
        <strong>Simulace opravnÃ© zkouÅ¡ky!</strong> 20 otÃ¡zek ze vÅ¡ech lekcÃ­. OdpovÄ›z na vÅ¡echny a uvidÃ­Å¡ svÃ© skÃ³re. Na znÃ¡mku 3 potÅ™ebujeÅ¡ alespoÅˆ 60 % (12 z 20).
      </div>`;

    shuffled.forEach((q, i) => {
      html += `<div class="test-question" id="testQ${i}">
        <div class="q-num">OtÃ¡zka ${i + 1} / 20</div>
        <p>${q.q}</p>
        <div class="quiz-options">
          ${q.opts.map((o, oi) => `<div class="quiz-opt" data-qi="${i}" data-oi="${oi}" onclick="testAnswer(${i},${oi},${q.correct})">${o}</div>`).join('')}
        </div>
      </div>`;
    });

    html += `<div class="btn-group" id="testSubmitWrap" style="display:none">
        <button class="btn btn-primary" style="font-size:1.1rem;padding:14px 32px" onclick="showTestResults(${idx})">Zobrazit vÃ½sledky ğŸ“Š</button>
      </div>
      <div id="testResults"></div>
    </div>`;
    return html;
  },
  afterRender() {
    window.testState = {};
    window.testTotal = 20;
    window.testAnswered = 0;
  }
},

// ===================== BONUSOVÃ‰ LEKCE (pro Å¡ikovnÃ© a zvÃ­davÃ©) =====================

// ===== BONUS 1: SloÅ¾itÄ›jÅ¡Ã­ zÃ¡pis â€“ vÃ­ce ÃºÄtÅ¯ =====
{
  short: '3 ÃºÄty',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ§©</span> Bonus 1: SloÅ¾itÄ›jÅ¡Ã­ zÃ¡pis â€“ na tÅ™i ÃºÄty</h2>
      <p>Jedna operace mÅ¯Å¾e ovlivnit <strong>vÃ­ce neÅ¾ dva ÃºÄty</strong>. PoÅ™Ã¡d ale platÃ­: souÄet na MD = souÄet na D.</p>
      <h3>PÅ™Ã­klad: Faktura za materiÃ¡l 112 100 KÄ (zÃ¡klad 100 000 + DPH 12 100)</h3>
      <p>PlÃ¡tce DPH rozloÅ¾Ã­ zÃ¡pis na <strong>tÅ™i ÃºÄty</strong>: 111 (poÅ™Ã­zenÃ­), 343 (DPH), 321 (dodavatel â€“ celkovÃ¡ ÄÃ¡stka).</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:16px 0">
        <div class="t-account" style="min-width:120px"><div class="t-account-title">111 MD</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry">100 000</div></div><div class="t-account-d"><div class="t-account-d-header">D</div></div></div></div>
        <div class="t-account" style="min-width:120px"><div class="t-account-title">343 MD</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div><div class="t-entry">12 100</div></div><div class="t-account-d"><div class="t-account-d-header">D</div></div></div></div>
        <div class="t-account" style="min-width:120px"><div class="t-account-title">321 D</div><div class="t-account-body"><div class="t-account-md"><div class="t-account-md-header">MD</div></div><div class="t-account-d"><div class="t-account-d-header">D</div><div class="t-entry">112 100</div></div></div></div>
      </div>
      <p style="text-align:center;font-weight:700;color:var(--primary)">MD: 100 000 + 12 100 = 112 100 &nbsp;|&nbsp; D: 112 100 âœ“</p>
      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'Faktura celkem 24 200 KÄ (zÃ¡klad 20 000 + DPH 21 %). Kolik jde na 343 MD?',
           opts:['4 200','20 000','24 200','3 640'], correct:0, explanation: 'DPH 21 % z 20 000 = 4 200 KÄ.'},
          {q:'PÅ™i zÃ¡pisu na 3 ÃºÄty musÃ­ platit:',
           opts:['SouÄet MD = souÄet D','MD musÃ­ bÃ½t vÅ¾dy vÄ›tÅ¡Ã­','D musÃ­ bÃ½t vÅ¾dy vÄ›tÅ¡Ã­','PoÄet zÃ¡pisÅ¯ na MD = na D'], correct:0, explanation: 'Podvojnost: souÄet stran se vÅ¾dy rovnÃ¡.'}
        ], 'quizB1', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== BONUS 2: NÃ¡klady a vÃ½daje pÅ™Ã­Å¡tÃ­ch obdobÃ­ =====
{
  short: 'NÃ¡klady pÅ™Ã­Å¡tÃ­ch obdobÃ­',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“…</span> Bonus 2: NÃ¡klady a vÃ½daje pÅ™Ã­Å¡tÃ­ch obdobÃ­</h2>
      <p>NÄ›kdy firma <strong>zaplatÃ­ v tomto roce</strong>, ale nÃ¡klad (nebo vÃ½nos) <strong>patÅ™Ã­ aÅ¾ do roku pÅ™Ã­Å¡tÃ­ho</strong>. NapÅ™. nÃ¡jemnÃ© za leden zaplacenÃ© v prosinci.</p>
      <h3>ÃšÄty</h3>
      <ul>
        <li><strong>379 â€“ NÃ¡klady pÅ™Ã­Å¡tÃ­ch obdobÃ­</strong> (aktivum) â€“ uÅ¾ jsme zaplatili, ale nÃ¡klad teprve nastane.</li>
        <li><strong>381 â€“ VÃ½daje pÅ™Ã­Å¡tÃ­ch obdobÃ­</strong> (pasivum) â€“ souvisÃ­ s vÃ½nosy pÅ™Ã­Å¡tÃ­ch obdobÃ­.</li>
      </ul>
      <p>ZjednoduÅ¡enÄ›: zaplatÃ­me nÃ¡jem 12 000 KÄ za leden v prosinci â†’ 379 MD, 221 D. V lednu pak â€spotÅ™ebujemeâ€œ nÃ¡klad: 518 MD (nÃ¡jem), 379 D.</p>
      <div class="tip">Na stÅ™ednÃ­ Å¡kole se Äasto probÃ­rÃ¡ jen zÃ¡kladnÃ­ pÅ™edstava â€“ dÅ¯leÅ¾itÃ© je vÄ›dÄ›t, Å¾e existujÃ­ ÃºÄty pro â€pÅ™esunâ€œ mezi obdobÃ­mi.</p>
      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'ÃšÄet 379 (NÃ¡klady pÅ™Ã­Å¡tÃ­ch obdobÃ­) je typicky:',
           opts:['AktivnÃ­','PasivnÃ­','NÃ¡kladovÃ½','VÃ½nosovÃ½'], correct:0, explanation: '379 je aktivum â€“ pÅ™edstavuje â€nÃ¡klad, kterÃ½ teprve nastaneâ€œ.'),
          {q:'KdyÅ¾ v lednu â€spotÅ™ebujemeâ€œ nÃ¡klad z 379, zaÃºÄtujeme:',
           opts:['NÃ¡klad 5xx/518 na MD, 379 na D','379 na MD, 221 na D','379 na MD, 5xx na D','518 na D, 379 na MD'], correct:0, explanation: 'NÃ¡klad v tomto obdobÃ­ (518 MD) a Ãºbytek z 379 (379 D).'}
        ], 'quizB2', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== BONUS 3: OdbÄ›ratelÃ© a dodavatelÃ© v praxi =====
{
  short: '311 a 321',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ¤</span> Bonus 3: OdbÄ›ratelÃ© (311) a dodavatelÃ© (321) v praxi</h2>
      <p><strong>311 â€“ OdbÄ›ratelÃ©</strong> = firma mÃ¡ pohledÃ¡vku (nÄ›kdo jÃ­ dluÅ¾Ã­). <strong>321 â€“ DodavatelÃ©</strong> = firma mÃ¡ zÃ¡vazek (ona dluÅ¾Ã­).</p>
      <h3>Kdy roste a kdy klesÃ¡?</h3>
      <ul>
        <li>Prodej na fakturu: <strong>311 MD</strong> (pohledÃ¡vka roste), 604/602 D. Ãšhrada od odbÄ›ratele: 221 MD, <strong>311 D</strong> (pohledÃ¡vka klesÃ¡).</li>
        <li>NÃ¡kup na fakturu: 501/132 MD, <strong>321 D</strong> (zÃ¡vazek roste). Ãšhrada dodavateli: <strong>321 MD</strong> (zÃ¡vazek klesÃ¡), 221 D.</li>
      </ul>
      <h3>ZÃ¡lohy</h3>
      <p>ZÃ¡loha <strong>od</strong> odbÄ›ratele (platÃ­ dopÅ™edu): 221 MD, 311 D (nebo zvlÃ¡Å¡tnÃ­ ÃºÄet 319). ZÃ¡loha <strong>dodavateli</strong>: 321 MD, 221 D (nebo 315).</p>
      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'Host zaplatil dopÅ™edu za konferenci pÅ™evodem 10 000 KÄ. ZaÃºÄtovÃ¡nÃ­:',
           opts:['221/311','311/221','602/221','221/602'], correct:0, explanation: 'PenÃ­ze na ÃºÄtu (221 MD), pohledÃ¡vka se snÃ­Å¾Ã­ nebo vznikne zÃ¡loha (311 D).'},
          {q:'ÃšÄet 321 (DodavatelÃ©) roste na stranÄ›:',
           opts:['D (Dal)','MD (MÃ¡ dÃ¡ti)','Obou','ZÃ¡leÅ¾Ã­'], correct:0, explanation: '321 je pasivnÃ­ â€“ pÅ™Ã­rÅ¯stek zÃ¡vazku je na D.'}
        ], 'quizB3', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== BONUS 4: ZÃ¡kladnÃ­ odpisy =====
{
  short: 'Odpisy',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“‰</span> Bonus 4: ZÃ¡kladnÃ­ odpisy</h2>
      <p>DlouhodobÃ½ majetek (auto, vybavenÃ­) se <strong>opotÅ™ebovÃ¡vÃ¡</strong>. Toto â€opotÅ™ebenÃ­â€œ je nÃ¡klad â€“ <strong>odpis</strong>. ÃšÄet <strong>551 â€“ Odpisy</strong> (nÃ¡klad), ÃºÄet <strong>082 â€“ OprÃ¡vky</strong> (k aktivu â€“ sniÅ¾uje jeho hodnotu).</p>
      <h3>ZjednoduÅ¡enÃ½ zÃ¡pis</h3>
      <p>MÄ›sÃ­ÄnÃ­ odpis vybavenÃ­ 2 000 KÄ: <strong>551 MD</strong> (nÃ¡klad), <strong>082 D</strong> (oprÃ¡vka roste). ÃšÄet 082 je â€oprÃ¡vka k majetkuâ€œ â€“ na rozvaze se uvÃ¡dÃ­ aktivum minus oprÃ¡vka.</p>
      <div class="tip">Na stÅ™ednÃ­ se Äasto pracuje jen s 551 a 082 v zÃ¡kladnÃ­ podobÄ›. DÅ¯leÅ¾itÃ©: odpis = nÃ¡klad (551 MD), ne vÃ½dej penÄ›z!</div>
      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'Odpis dlouhodobÃ©ho majetku se zaÃºÄtuje:',
           opts:['551 MD, 082 D','082 MD, 551 D','551 MD, 221 D','022 D, 551 MD'], correct:0, explanation: 'NÃ¡klad 551 MD, oprÃ¡vka (Ãºbytek hodnoty majetku) 082 D.'},
          {q:'Odpis znamenÃ¡:',
           opts:['VÃ½dej penÄ›z z pokladny','Ãšbytek hodnoty majetku (nÃ¡klad)','ZvÃ½Å¡enÃ­ zisku','Platbu dodavateli'], correct:1, explanation: 'Odpis = vyjÃ¡dÅ™enÃ­ opotÅ™ebenÃ­ majetku jako nÃ¡klad.'}
        ], 'quizB4', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== BONUS 5: VÃ½sledovka â€“ nÃ¡klady a vÃ½nosy =====
{
  short: 'VÃ½sledovka',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ“Š</span> Bonus 5: VÃ½sledovka â€“ nÃ¡klady a vÃ½nosy</h2>
      <p><strong>VÃ½sledovka</strong> (vÃ½kaz zisku a ztrÃ¡ty) ukazuje, jak firma <strong>vydÄ›lala nebo prodÄ›lala</strong> v danÃ©m obdobÃ­.</p>
      <p><strong>VÃ½nosy</strong> (6xx) = co firma vydÄ›lala (trÅ¾by 602, 604â€¦). <strong>NÃ¡klady</strong> (5xx) = co firma utratila (spotÅ™eba, mzdy, odpisyâ€¦).</p>
      <div class="equation">
        <div class="eq-box eq-pasiva">VÃNOSY (6xx)</div>
        <div class="eq-sign">âˆ’</div>
        <div class="eq-box eq-naklady">NÃKLADY (5xx)</div>
        <div class="eq-sign">=</div>
        <div class="eq-box eq-aktiva">VÃSLEDEK (zisk / ztrÃ¡ta)</div>
      </div>
      <p>Zisk = vÃ½nosy vÄ›tÅ¡Ã­ neÅ¾ nÃ¡klady. ZtrÃ¡ta = nÃ¡klady vÄ›tÅ¡Ã­ neÅ¾ vÃ½nosy. Na konci roku se ÃºÄty 5xx a 6xx â€uzavÅ™ouâ€œ do vÃ½sledku (zÃ¡vÄ›rkovÃ© ÃºÄty 7xx).</p>
      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'TrÅ¾by za ubytovÃ¡nÃ­ 100 000 KÄ, nÃ¡klady 70 000 KÄ. VÃ½sledek je:',
           opts:['Zisk 30 000','ZtrÃ¡ta 30 000','Zisk 170 000','Nelze urÄit'], correct:0, explanation: 'VÃ½nosy âˆ’ NÃ¡klady = 100 000 âˆ’ 70 000 = 30 000 zisk.'},
          {q:'ÃšÄty 5xx jsou:',
           opts:['NÃ¡kladovÃ©','VÃ½nosovÃ©','RozvahovÃ© aktivnÃ­','RozvahovÃ© pasivnÃ­'], correct:0, explanation: '5xx = nÃ¡klady (spotÅ™eba, mzdy, odpisyâ€¦).'}
        ], 'quizB5', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== BONUS 6: Hotel â€“ minibar a ubytovÃ¡nÃ­ =====
{
  short: 'Hotel minibar',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ¨</span> Bonus 6: Hotel v praxi â€“ minibar a ubytovÃ¡nÃ­</h2>
      <p>Jeden den v hotelu: host se ubytoval, zaplatil kartou za pokoj 3 000 KÄ, a z minibaru si vzal pitÃ­ za 150 KÄ (zaplatil hotovÄ›).</p>
      <h3>ZÃ¡pisy</h3>
      <ul>
        <li><strong>UbytovÃ¡nÃ­ kartou 3 000 KÄ:</strong> 221 MD, 602 D (trÅ¾by za sluÅ¾by).</li>
        <li><strong>Minibar hotovÄ› 150 KÄ:</strong> 211 MD, 604 D (trÅ¾by za zboÅ¾Ã­). ZÃ¡roveÅˆ bychom snÃ­Å¾ili zÃ¡soby minibaru: 501 MD, 132 D (pokud to hotel eviduje pÅ™i prodeji).</li>
      </ul>
      <p>NÃ¡kup zboÅ¾Ã­ do minibaru (pÅ™edtÃ­m): 132 MD, 321 D (nebo 132 MD, 343 MD, 321 D u plÃ¡tce). Prodej = vÃ½nos 604 a Ãºbytek zÃ¡sob 132 â†’ 501.</p>
      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'Host zaplatil hotovÄ› za snÃ­dani 250 KÄ. ZaÃºÄtovÃ¡nÃ­:',
           opts:['211/602','602/211','211/604','221/602'], correct:0, explanation: 'Pokladna (211 MD), trÅ¾ba za sluÅ¾by â€“ stravovÃ¡nÃ­ (602 D).'},
          {q:'ÃšÄet 132 (ZboÅ¾Ã­ na skladÄ›) ubÃ½vÃ¡ pÅ™i:',
           opts:['Prodeji zboÅ¾Ã­ (vÃ½dej do nÃ¡kladu)','NÃ¡kupu zboÅ¾Ã­','ÃšhradÄ› faktury','Inventarizaci'], correct:0, explanation: 'PÅ™i prodeji: 501 MD, 132 D â€“ zboÅ¾Ã­ ubÃ½vÃ¡.'}
        ], 'quizB6', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== BONUS 7: Kontrola a typickÃ© chyby =====
{
  short: 'Kontrola a chyby',
  render(idx) {
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ”</span> Bonus 7: Kontrola a typickÃ© chyby</h2>
      <p>V podvojnÃ©m ÃºÄetnictvÃ­ <strong>souÄet vÅ¡ech MD = souÄet vÅ¡ech D</strong>. KdyÅ¾ se to nerovnÃ¡, nÄ›kde je chyba.</p>
      <h3>TypickÃ© chyby</h3>
      <ul>
        <li><strong>Å patnÃ¡ strana ÃºÄtu</strong> â€“ pÅ™Ã­rÅ¯stek na aktivnÃ­m ÃºÄtu musÃ­ na MD, ne na D.</li>
        <li><strong>VynechanÃ½ druhÃ½ zÃ¡pis</strong> â€“ kaÅ¾dÃ¡ operace mÃ¡ dva zÃ¡pisy (dva ÃºÄty).</li>
        <li><strong>PÅ™evod banka â†” pokladna bez 261</strong> â€“ vÅ¾dy dva kroky pÅ™es ÃºÄet 261.</li>
        <li><strong>ZÃ¡mÄ›na podobnÃ½ch ÃºÄtÅ¯</strong> â€“ 311 vs. 321 (odbÄ›ratelÃ© vs. dodavatelÃ©), 335 vs. 331 (pohledÃ¡vky vs. zÃ¡vazky ke zamÄ›stnancÅ¯m).</li>
      </ul>
      <h3>Jak hledat chybu</h3>
      <p>Zkontroluj souÄty MD a D po kaÅ¾dÃ© operaci. Zkontroluj, zda u pÅ™evodÅ¯ hotovosti jsi pouÅ¾il 261. Zkontroluj, zda u kaÅ¾dÃ©ho dokladu mÃ¡Å¡ zÃ¡pis na obou stranÃ¡ch.</p>
      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z</div>
        ${makeQuiz([
          {q:'SouÄet MD se nerovnÃ¡ souÄtu D. To znamenÃ¡:',
           opts:['Je tÅ™eba najÃ­t a opravit chybu','Je to v poÅ™Ã¡dku u ztrÃ¡ty','StaÄÃ­ zaokrouhlit','ÃšÄetnictvÃ­ je Å¡patnÄ› vedenÃ©'], correct:0, explanation: 'V podvojnÃ©m ÃºÄetnictvÃ­ musÃ­ MD = D vÅ¾dy.'},
          {q:'PÅ™i vÃ½bÄ›ru z banky do pokladny jsem zaÃºÄtoval jen 211/221. Co je Å¡patnÄ›?',
           opts:['ChybÃ­ krok pÅ™es 261','MÄ›lo bÃ½t 221/211','Nelze vÃ½bÃ­rat do pokladny','Nic'], correct:0, explanation: 'PÅ™evod mezi 211 a 221 musÃ­ jÃ­t vÅ¾dy pÅ™es 261 ve dvou krocÃ­ch.'}
        ], 'quizB7', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
},

// ===== BONUS 8: Mega-prÃ¡ce v hodinÄ› =====
{
  short: 'Mega pÅ™Ã­klad',
  render(idx) {
    const ops = [
      {n:1, text:'PPD â€“ vÃ½bÄ›r z banky 20 000 KÄ', md:'261', d:'221', am:'20 000'},
      {n:2, text:'VBU â€“ vÃ½bÄ›r na pokladnu 20 000 KÄ', md:'211', d:'261', am:'20 000'},
      {n:3, text:'VPD â€“ zÃ¡loha na sluÅ¾ebnÃ­ cestu 1 000 KÄ', md:'335', d:'211', am:'1 000'},
      {n:4, text:'Schodek na pokladnÄ› 500 KÄ', md:'569', d:'211', am:'500'},
      {n:5, text:'PÅ™edpis schodku k ÃºhradÄ› 500 KÄ', md:'668', d:'335', am:'500'},
      {n:6, text:'VyÃºÄtovÃ¡nÃ­ zÃ¡lohy â€“ cestovnÃ© 982 KÄ, vrÃ¡cenÃ­ 18 KÄ', md1:'512', d1:'335', am1:'982', md2:'211', d2:'335', am2:'18'},
      {n:7, text:'DoÅ¡la faktura za stravenky 3 000 KÄ', md:'213', d:'321', am:'3 000'},
      {n:8, text:'Ãšhrada schodku srÃ¡Å¾kou ze mzdy 500 KÄ', md:'331', d:'335', am:'500'},
    ];
    let tableRows = ops.map(o => {
      if (o.md2) return `<tr><td>${o.n}a</td><td>${o.text.split(',')[0]}</td><td>${o.md1}</td><td>${o.d1}</td><td>${o.am1}</td></tr><tr><td>${o.n}b</td><td>VrÃ¡cenÃ­ pÅ™eplatku</td><td>${o.md2}</td><td>${o.d2}</td><td>${o.am2}</td></tr>`;
      return `<tr><td>${o.n}</td><td>${o.text}</td><td>${o.md}</td><td>${o.d}</td><td>${o.am}</td></tr>`;
    }).join('');
    return `<div class="lesson">
      <h2><span class="emoji">ğŸ¯</span> Bonus 8: Mega-prÃ¡ce v hodinÄ›</h2>
      <p>Jeden velkÃ½ pÅ™Ã­klad, kterÃ½ spojuje <strong>vÃ½bÄ›r pÅ™es 261</strong>, <strong>zÃ¡lohy</strong>, <strong>schodek</strong>, <strong>vyÃºÄtovÃ¡nÃ­</strong>, <strong>ceniny</strong> a <strong>Ãºhradu srÃ¡Å¾kou</strong>. Projdi si kaÅ¾dÃ½ Å™Ã¡dek a ovÄ›Å™ zÃ¡pisy.</p>
      <div class="exercise">
        <div class="exercise-title">ZadÃ¡nÃ­ a Å™eÅ¡enÃ­</div>
        <table class="acc-table">
          <tr><th>#</th><th>Operace</th><th>MD</th><th>D</th><th>ÄŒÃ¡stka</th></tr>
          ${tableRows}
        </table>
      </div>
      <div class="tip">Operace 6: nejdÅ™Ã­v vyÃºÄtovÃ¡nÃ­ cestovnÃ©ho (512/335 982), pak vrÃ¡cenÃ­ pÅ™eplatku (211/335 18). Operace 1â€“2: vÃ½bÄ›r vÅ¾dy pÅ™es 261!</div>
      <div class="exercise">
        <div class="exercise-title">ğŸ¯ KvÃ­z na zÃ¡vÄ›r</div>
        ${makeQuiz([
          {q:'V tomto mega-pÅ™Ã­kladu kolikrÃ¡t vystupuje ÃºÄet 261?',
           opts:['DvakrÃ¡t (MD i D) v operacÃ­ch 1 a 2','Jednou','TÅ™ikrÃ¡t','Nikdy'], correct:0, explanation: '261 MD v operaci 1 (PPD), 261 D v operaci 2 (VBU).'},
          {q:'Ãšhrada schodku 500 KÄ srÃ¡Å¾kou:',
           opts:['331/335','335/331','569/331','211/335'], correct:0, explanation: 'ZÃ¡vazek zamÄ›stnancÅ¯m (331) klesÃ¡, pohledÃ¡vka (335) klesÃ¡.'}
        ], 'quizB8', idx)}
      </div>
      ${makeFooter(idx)}
    </div>`;
  }
}
];

// ===================== EXERCISE HANDLERS =====================

// Drag & Drop
function initDragDrop() {
  document.querySelectorAll('.dnd-item').forEach(item => {
    item.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', '');
      e.target.style.opacity = '0.5';
      window._dragItem = e.target;
    });
    item.addEventListener('dragend', e => {
      e.target.style.opacity = '1';
      window._dragItem = null;
    });
    // Podpora pro mobil (touch)
    item.addEventListener('touchstart', e => {
      window._dragItem = e.target.closest('.dnd-item');
    });
  });

  document.querySelectorAll('.dnd-zone').forEach(zone => {
    zone.addEventListener('dragover', e => {e.preventDefault(); zone.classList.add('over');});
    zone.addEventListener('dragleave', () => zone.classList.remove('over'));
    zone.addEventListener('drop', e => {
      e.preventDefault();
      zone.classList.remove('over');
      if (window._dragItem) {
        zone.appendChild(window._dragItem);
        window._dragItem = null;
      }
    });
    // Touch
    zone.addEventListener('touchend', e => {
      if (window._dragItem) {
        zone.appendChild(window._dragItem);
        window._dragItem = null;
      }
    });
  });

  // KliknutÃ­ jako fallback pro pÅ™esun
  document.querySelectorAll('.dnd-item').forEach(item => {
    item.addEventListener('click', () => {
      if (item.parentElement.classList.contains('dnd-source')) {
        // PÅ™esun do prvnÃ­ neprÃ¡zdnÃ© zÃ³ny, nebo stÅ™Ã­dej
        if (!window._selectedDnd) {
          window._selectedDnd = item;
          item.style.outline = '3px solid var(--primary)';
        }
      }
    });
  });
  document.querySelectorAll('.dnd-zone').forEach(zone => {
    zone.addEventListener('click', () => {
      if (window._selectedDnd) {
        zone.appendChild(window._selectedDnd);
        window._selectedDnd.style.outline = '';
        window._selectedDnd = null;
      }
    });
  });
}

function checkDnd2(lessonIdx) {
  const zones = document.querySelectorAll('.dnd-zone');
  let correct = 0, total = 0;
  zones.forEach(zone => {
    const target = zone.dataset.target;
    zone.querySelectorAll('.dnd-item').forEach(item => {
      total++;
      if (item.dataset.correct === target) {
        item.classList.add('correct-place');
        item.classList.remove('wrong-place');
        correct++;
      } else {
        item.classList.add('wrong-place');
        item.classList.remove('correct-place');
      }
    });
  });
  const source = document.getElementById('dndSource2');
  const remaining = source.querySelectorAll('.dnd-item').length;
  if (remaining > 0) {
    showFeedback('dnd2feedback', `JeÅ¡tÄ› mÃ¡Å¡ ${remaining} poloÅ¾ek v zÃ¡sobnÃ­ku! PÅ™etÃ¡hni je do sprÃ¡vnÃ© kategorie.`, 'error');
    return;
  }
  if (correct === total) {
    showFeedback('dnd2feedback', `VÃ½bornÄ›! VÅ¡ech ${total} poloÅ¾ek je sprÃ¡vnÄ›! ğŸ‰`, 'success');
    APP.completeLesson(lessonIdx);
  } else {
    showFeedback('dnd2feedback', `${correct} z ${total} sprÃ¡vnÄ›. Å patnÄ› zaÅ™azenÃ© se zatÅ™Ã¡sly â€“ zkus je pÅ™esunout! ğŸ’ª`, 'error');
  }
}

// T-Click exercise
function checkTClick(i, clicked, correct, lessonIdx) {
  if (window.tClickState[i] !== undefined) return;
  window.tClickState[i] = clicked;
  const container = document.getElementById(`tclick_${i}`);
  const areas = container.querySelectorAll('.t-click-area');
  const fb = document.getElementById(`tclick_fb_${i}`);

  if (clicked === correct) {
    areas.forEach(a => {
      if ((clicked === 'md' && a.textContent.includes('MD')) || (clicked === 'd' && a.textContent.includes('D')))
        a.classList.add('flash-green');
    });
    fb.textContent = 'âœ“ SprÃ¡vnÄ›! ' + window.tClickHints[i];
    fb.className = 'feedback show success';
  } else {
    areas.forEach(a => {
      if ((clicked === 'md' && a.textContent.includes('MD')) || (clicked === 'd' && a.textContent.includes('D')))
        a.classList.add('flash-red');
      if ((correct === 'md' && a.textContent.includes('MD')) || (correct === 'd' && a.textContent.includes('D')))
        a.classList.add('flash-green');
    });
    fb.textContent = 'âœ— SprÃ¡vnÃ¡ odpovÄ›Ä: ' + (correct === 'md' ? 'MD (levÃ¡)' : 'D (pravÃ¡)') + '. ' + window.tClickHints[i];
    fb.className = 'feedback show error';
  }

  const answeredCount = Object.keys(window.tClickState).length;
  if (answeredCount >= window.tClickTotal) {
    const correctCount = Object.entries(window.tClickState).filter(([k, v]) => v === (
      ['md','d','d','md','md','d'][k]
    )).length;
    if (correctCount >= Math.ceil(window.tClickTotal * 0.5)) {
      setTimeout(() => APP.completeLesson(lessonIdx), 600);
    }
  }
}

// Matching exercise
function matchClick(el, side, lessonIdx) {
  if (el.classList.contains('matched')) return;
  const sel = window.matchSelected;
  // Deselektuj pÅ™edchozÃ­ ze stejnÃ© strany
  if (sel[side]) sel[side].classList.remove('selected');
  el.classList.add('selected');
  sel[side] = el;

  if (sel.left && sel.right) {
    const leftVal = sel.left.dataset.val;
    const rightVal = sel.right.dataset.val;
    if (window.matchPairs[leftVal] === rightVal) {
      sel.left.classList.add('matched');
      sel.right.classList.add('matched');
      sel.left.classList.remove('selected');
      sel.right.classList.remove('selected');
      window.matchedCount++;
      if (window.matchedCount >= window.matchTotal) {
        showFeedback('match4feedback', 'VÃ½bornÄ›! VÅ¡echny ÃºÄty pÅ™iÅ™azeny sprÃ¡vnÄ›! ğŸ‰', 'success');
        document.getElementById('match4btns').style.display = 'flex';
        APP.completeLesson(lessonIdx);
      }
    } else {
      sel.left.classList.add('wrong-match');
      sel.right.classList.add('wrong-match');
      setTimeout(() => {
        sel.left.classList.remove('wrong-match', 'selected');
        sel.right.classList.remove('wrong-match', 'selected');
        window.matchSelected = {left: null, right: null};
      }, 500);
      return;
    }
    window.matchSelected = {left: null, right: null};
  }
}

// Document error exercise â€“ kliknout mÅ¯Å¾eÅ¡ na libovolnÃ½ Å™Ã¡dek, sprÃ¡vnÃ½ je jen ten s chybou
function findDocError(el, docNum) {
  if (el.classList.contains('found')) return;
  if (el.getAttribute('data-is-error') !== '1') {
    showFeedback(`doc${docNum}fb`, 'Tady chyba nenÃ­. Zkus jinÃ½ Å™Ã¡dek.', 'error');
    return;
  }
  el.classList.add('found');
  const msgs = {
    1: 'SprÃ¡vnÄ›! ChybÃ­ penÄ›Å¾nÃ­ ÄÃ¡stka â€“ povinnÃ¡ nÃ¡leÅ¾itost dokladu.',
    2: 'SprÃ¡vnÄ›! ChybÃ­ ÄÃ­slo/oznaÄenÃ­ dokladu â€“ povinnÃ¡ nÃ¡leÅ¾itost.',
    3: 'SprÃ¡vnÄ›! ChybÃ­ podpis odpovÄ›dnÃ© osoby â€“ povinnÃ¡ nÃ¡leÅ¾itost.'
  };
  showFeedback(`doc${docNum}fb`, msgs[docNum], 'success');
  window.docErrors.found++;
  if (window.docErrors.found >= window.docErrors.total) {
    const score = document.getElementById('docScore');
    document.getElementById('docScoreNum').textContent = '3 / 3';
    score.style.display = 'block';
    APP.completeLesson(12); // lekce Doklady
    score.scrollIntoView({behavior: 'smooth'});
  }
}

// DPH exercise
function checkDph(i, correctDph, correctTotal, correctZaklad, lessonIdx) {
  const dphInput = document.getElementById(`dph_d_${i}`);
  const dphVal = parseInt(dphInput.value);
  let ok = true;

  if (correctZaklad > 0) {
    const zInput = document.getElementById(`dph_z_${i}`);
    const zVal = parseInt(zInput.value);
    if (zVal !== correctZaklad) ok = false;
  } else {
    const tInput = document.getElementById(`dph_t_${i}`);
    const tVal = parseInt(tInput.value);
    if (tVal !== correctTotal) ok = false;
  }
  if (dphVal !== correctDph) ok = false;

  const fb = document.getElementById(`dph_fb_${i}`);
  if (ok) {
    fb.textContent = 'âœ“ SprÃ¡vnÄ›!';
    fb.className = 'feedback show success';
    window.dphSolved++;
    if (window.dphSolved >= window.dphTotal) {
      setTimeout(() => APP.completeLesson(lessonIdx), 400);
    }
  } else {
    let hint = '';
    if (correctZaklad > 0) {
      hint = `ZÃ¡klad = ${correctZaklad.toLocaleString()} KÄ, DPH = ${correctDph.toLocaleString()} KÄ. Tip: z celkovÃ© ceny vÄetnÄ› DPH 21% je zÃ¡klad = celkem / 1,21`;
    } else {
      hint = `DPH = ${correctDph.toLocaleString()} KÄ, Celkem = ${correctTotal.toLocaleString()} KÄ.`;
    }
    fb.textContent = 'âœ— Zkus to znovu. ' + hint;
    fb.className = 'feedback show error';
  }
}

// Final test
function testAnswer(qi, oi, correct) {
  if (window.testState[qi] !== undefined) return;
  window.testState[qi] = oi;
  window.testAnswered++;

  const qEl = document.getElementById(`testQ${qi}`);
  const opts = qEl.querySelectorAll('.quiz-opt');
  opts.forEach((o, i) => {
    if (i === correct) o.classList.add('correct');
    else if (i === oi && oi !== correct) o.classList.add('wrong');
  });

  if (window.testAnswered >= window.testTotal) {
    document.getElementById('testSubmitWrap').style.display = 'flex';
    document.getElementById('testSubmitWrap').scrollIntoView({behavior:'smooth'});
  }
}

function showTestResults(lessonIdx) {
  let correct = 0;
  for (let i = 0; i < window.testTotal; i++) {
    const qEl = document.getElementById(`testQ${i}`);
    const opts = qEl.querySelectorAll('.quiz-opt');
    const correctIdx = [...opts].findIndex(o => o.classList.contains('correct'));
    if (window.testState[i] === correctIdx) correct++;
  }
  const pct = Math.round((correct / window.testTotal) * 100);
  let grade, gradeColor, msg;
  if (pct >= 90) { grade = '1 (vÃ½bornÄ›)'; gradeColor = 'var(--green)'; msg = 'VynikajÃ­cÃ­! Na zkouÅ¡ku jsi pÅ™ipravenÃ¡ na jedniÄku! ğŸ†'; }
  else if (pct >= 75) { grade = '2 (chvalitebnÄ›)'; gradeColor = 'var(--accent)'; msg = 'SkvÄ›lÃ©! Dvojka je super vÃ½sledek! ğŸ‰'; }
  else if (pct >= 60) { grade = '3 (dobÅ™e)'; gradeColor = 'var(--blue)'; msg = 'MÃ¡Å¡ to! Trojka staÄÃ­ na sloÅ¾enÃ­ zkouÅ¡ky! ğŸ’ª'; }
  else if (pct >= 40) { grade = '4 (dostateÄnÄ›)'; gradeColor = 'var(--orange)'; msg = 'TÄ›snÄ›. Projdi si lekce jeÅ¡tÄ› jednou a bude to! ğŸ“–'; }
  else { grade = '5 (nedostateÄnÄ›)'; gradeColor = 'var(--red)'; msg = 'NevzdÃ¡vej to! Projdi znovu lekce a zkus test jeÅ¡tÄ› jednou. ğŸŒ±'; }

  const resultsDiv = document.getElementById('testResults');
  resultsDiv.innerHTML = `
    <div class="test-summary">
      <div class="big-score" style="color:${gradeColor}">${correct} / ${window.testTotal}</div>
      <div class="grade" style="color:${gradeColor}">ZnÃ¡mka: ${grade}</div>
      <p>${msg}</p>
      <p style="margin-top:8px;font-size:.9rem;color:var(--text2)">${pct} % sprÃ¡vnÄ›</p>
    </div>
    <div class="btn-group">
      <button class="btn btn-primary" onclick="APP.showLesson(${lessonIdx})">Zkusit test znovu ğŸ”„</button>
      <button class="btn btn-outline" onclick="APP.showLesson(0)">ZpÄ›t na Ãºvod</button>
      <button class="btn btn-accent" onclick="window.print()">Vytisknout tahÃ¡k ğŸ–¨ï¸</button>
    </div>
  `;
  resultsDiv.scrollIntoView({behavior:'smooth'});
  if (pct >= 50) APP.completeLesson(lessonIdx);
  if (pct >= 60) showConfetti();
}

// Feedback helper
function showFeedback(id, msg, type) {
  const el = document.getElementById(id);
  el.textContent = msg;
  el.className = `feedback show ${type}`;
}

// ===================== INIT =====================
document.addEventListener('DOMContentLoaded', () => APP.init());
</script>
</body>
</html>
